import{I as W,v as X,X as Y,f as Z,x as q,y as G,Y as H,Z as J,D as Q}from"./element-plus.js";import{u as ee,a as te}from"./vue-router.js";import{h as z,A as P,_ as ae}from"./index.js";import{r as c,W as k,n as S,c as x,o as m,a as E,V as e,S as oe,K as D,L as a,I as le,ab as re,a3 as n,P as i}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./@element-plus.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */let ne=(p=1)=>z({url:"".concat(P.BASE_API,"/cms/trial/search?cur=").concat(p,"&pageSize=20"),method:"get"}),ie=p=>z({url:"".concat(P.BASE_API,"/cms/trial/detail?id=").concat(p),method:"get"});const se={class:"radius-6 bg-fff pd-20"},ce={class:"mt-20 flex justify-end"},ue={__name:"index",setup(p){ee(),te(),c(null);const B=c(null),_=c(!1),b=c([]),I=c([]),w=c(0),u=c(1),f=c(20);k({keywords:""});const h=c(!1),l=k({}),T={CFD:"长风通用流体仿真分析软件",RASE:"汽车造型快速评估软件",AiAero:"智能风阻预测软件"},g=t=>!t&&t!==0?[]:(Array.isArray(t)?t:String(t).split(",").filter(Boolean)).map(o=>T[o]||o),v=async()=>{try{_.value=!0;const t=await ne(u.value,f.value);t&&t.code===200&&(b.value=Array.isArray(t.data.list)?t.data.list:[],w.value=Number(t.data.count)||0,u.value=Number(t.data.current)||u.value)}catch(t){console.error(t)}finally{_.value=!1}},$=t=>{u.value=t,v()},N=t=>{f.value=t,u.value=1,v()},R=t=>{I.value=t},j=async t=>{try{const r=await ie(t.id);r&&r.code===200&&(Object.assign(l,r.data||{}),h.value=!0)}catch(r){console.error(r)}},y=()=>{h.value=!1;for(const t in l)delete l[t]};return S(()=>{v()}),S(()=>{}),(t,r)=>{const o=X,V=Y,A=Z,L=q,F=G,s=J,M=H,K=Q,O=W;return m(),x("div",null,[E("div",se,[oe((m(),D(L,{ref_key:"multipleTableRef",ref:B,data:b.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:R},{default:a(()=>[e(o,{prop:"id",label:"编号",width:"70"}),e(o,{prop:"name",label:"姓名",width:"120","show-overflow-tooltip":""}),e(o,{prop:"tel",label:"电话",width:"120","show-overflow-tooltip":""}),e(o,{prop:"email",label:"邮箱",width:"180","show-overflow-tooltip":""}),e(o,{prop:"scene",label:"试用场景",width:"100","show-overflow-tooltip":""}),e(o,{label:"试用产品",width:"200"},{default:a(d=>[(m(!0),x(le,null,re(g(d.row.trial_products),(C,U)=>(m(),D(V,{key:U},{default:a(()=>[n(i(C),1)]),_:2},1024))),128))]),_:1}),e(o,{prop:"company",label:"公司",width:"150","show-overflow-tooltip":""}),e(o,{prop:"province",label:"所在省份",width:"100","show-overflow-tooltip":""}),e(o,{prop:"industry",label:"行业",width:"80","show-overflow-tooltip":""}),e(o,{prop:"createdAt",label:"创建时间",width:"180"}),e(o,{fixed:"right",label:"操作",width:"70"},{default:a(d=>[e(A,{link:"",onClick:C=>j(d.row)},{default:a(()=>[...r[1]||(r[1]=[n("查看详情",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[O,_.value]]),E("div",ce,[e(F,{background:"",layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:$,onSizeChange:N,"page-sizes":[10,20,50,100],total:w.value,currentPage:u.value,"onUpdate:currentPage":r[0]||(r[0]=d=>u.value=d),"page-size":f.value,size:"small"},null,8,["total","currentPage","page-size"])])]),e(K,{"model-value":h.value,title:"试用申请详情",width:"600px",onClose:y},{footer:a(()=>[e(A,{onClick:y},{default:a(()=>[...r[2]||(r[2]=[n("关闭",-1)])]),_:1})]),default:a(()=>[e(M,{column:1,border:""},{default:a(()=>[e(s,{label:"编号"},{default:a(()=>[n(i(l.id),1)]),_:1}),e(s,{label:"姓名"},{default:a(()=>[n(i(l.name),1)]),_:1}),e(s,{label:"电话"},{default:a(()=>[n(i(l.tel),1)]),_:1}),e(s,{label:"邮箱"},{default:a(()=>[n(i(l.email),1)]),_:1}),e(s,{label:"公司"},{default:a(()=>[n(i(l.company),1)]),_:1}),e(s,{label:"所在省份"},{default:a(()=>[n(i(l.province),1)]),_:1}),e(s,{label:"行业"},{default:a(()=>[n(i(l.industry),1)]),_:1}),e(s,{label:"试用场景"},{default:a(()=>[n(i(l.scene),1)]),_:1}),e(s,{label:"试用产品"},{default:a(()=>[n(i(g(l.trial_products).join("、")),1)]),_:1}),e(s,{label:"创建时间"},{default:a(()=>[n(i(l.createdAt),1)]),_:1})]),_:1})]),_:1},8,["model-value"])])}}},Pe=ae(ue,[["__scopeId","data-v-df6c8b19"]]);export{Pe as default};
