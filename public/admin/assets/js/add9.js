import{r as x,s as E,C as N,g as v,q as y,a as f}from"./element-plus.js";import{u as C}from"./vue-router.js";import{c as U}from"./model.js";import{r as q,W as _,c as w,o as R,O as l,L as o,a3 as s}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./@element-plus.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./index.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const B={class:"bg-fff pd-20 radius-6"},$={__name:"add",setup(F){const d=C(),n=q(null),t=_({model:"",tableName:"",status:1,remark:""}),b=_({model:[{required:!0,message:"请输入模型名称",trigger:"blur"}],tableName:[{required:!0,message:"请输入表名",trigger:"blur"},{validator:g,trigger:"blur"}],remark:[{required:!0,message:"请输入备注",trigger:"blur"}]});function g(u,e,a){e.startsWith("ext_")?a():a(new Error("表名必须以 ext_ 开头"))}function V(){d.go(-1)}async function c(){n.value.validate(async u=>{if(u)try{const e=await U({...t});e.code===200?(f.success("创建表成功^_^"),d.go(-1)):f.error(e.msg)}catch(e){console.error(e)}else return console.log("error submit!!"),!1})}return(u,e)=>{const a=E,m=x,i=N,p=v,k=y;return R(),w("div",B,[l(k,{model:t,rules:b,ref_key:"formRef",ref:n,"label-width":"100px",class:"mt-20"},{default:o(()=>[l(m,{label:"模型名称",prop:"model"},{default:o(()=>[l(a,{modelValue:t.model,"onUpdate:modelValue":e[0]||(e[0]=r=>t.model=r),placeholder:"请输入模型名称"},null,8,["modelValue"])]),_:1}),l(m,{label:"新增表名",prop:"tableName"},{default:o(()=>[l(a,{modelValue:t.tableName,"onUpdate:modelValue":e[1]||(e[1]=r=>t.tableName=r),placeholder:"表名称必须ext_开头"},null,8,["modelValue"])]),_:1}),l(m,{label:"是否启用"},{default:o(()=>[l(i,{modelValue:t.status,"onUpdate:modelValue":e[2]||(e[2]=r=>t.status=r),label:1},{default:o(()=>e[5]||(e[5]=[s("开启")])),_:1},8,["modelValue"]),l(i,{modelValue:t.status,"onUpdate:modelValue":e[3]||(e[3]=r=>t.status=r),label:0},{default:o(()=>e[6]||(e[6]=[s("禁用")])),_:1},8,["modelValue"])]),_:1}),l(m,{label:"备注",prop:"remark"},{default:o(()=>[l(a,{modelValue:t.remark,"onUpdate:modelValue":e[4]||(e[4]=r=>t.remark=r),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1}),l(m,null,{default:o(()=>[l(p,{type:"primary",onClick:c},{default:o(()=>e[7]||(e[7]=[s("保存")])),_:1}),l(p,{onClick:V},{default:o(()=>e[8]||(e[8]=[s("返回")])),_:1})]),_:1})]),_:1},8,["model","rules"])])}}};export{$ as default};
