System.register(["./element-plus-legacy.js","./vue-router-legacy.js","./@element-plus-legacy.js","./collect-legacy.js","./article-legacy.js","./index-legacy.js","./@vue-legacy.js","./dayjs-legacy.js","./ace-builds-legacy.js","./lodash-es-legacy.js","./@popperjs-legacy.js","./async-validator-legacy.js","./@ctrl-legacy.js","./memoize-one-legacy.js","./normalize-wheel-es-legacy.js","./pinia-legacy.js","./pinia-plugin-persist-legacy.js","./axios-legacy.js","./js-cookie-legacy.js","./nprogress-legacy.js","./saduo-legacy.js"],function(e,t){"use strict";var a,l,s,c,n,o,r,i,u,d,p,g,y,f,m,j,v,h,w,_,k,b,x,C,T,S,A,D,z;return{setters:[e=>{a=e.f,l=e.u,s=e.v,c=e.x,n=e.y,o=e.E},e=>{r=e.u},e=>{i=e.H,u=e.F,d=e.J},e=>{p=e.l,g=e.b,y=e.a},e=>{f=e.c},e=>{m=e.f},e=>{j=e.r,v=e.W,h=e.n,w=e.aj,_=e.ar,k=e.c,b=e.o,x=e.V,C=e.L,T=e.a3,S=e.P,A=e.S,D=e.u,z=e.K},null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const t={class:"bg-fff radius-6 pd-20"};e("default",{__name:"index",setup(e){const I=r(),P=j(null),F=j([]),U=j([]),$=j(0),B=j(1),E=j(0),G=v({cid:0,title:"",shortTitle:"",tagId:"",attr:[],source:"",author:"",description:"",img:"",createdAt:new Date,updatedAt:new Date,content:"欢迎使用",status:"0",pv:1,link:""}),H=async()=>{try{const e=await p(B.value);200===e.code&&(F.value=[...e.data.list],$.value=e.data.count)}catch(e){console.log(e)}},J=e=>{B.value=e,p()},K=e=>{U.value=e},L=async e=>{try{const{pages:t,titleTag:a,articleTag:l,parseData:s,charset:c,cid:n,status:o}=e,r=t.split(","),i=await y({taskUrl:r[E.value],titleTag:a,articleTag:l,parseData:s,charset:c});if(200===i.code){const{title:e,article:t}=i.data;G.title=e,G.content=t,G.cid=n,G.status=1===o?1:0,N(G)}}catch(t){console.log(t)}},N=async e=>{try{const t={...G};t.attr=t.attr.toString(),t.tagId=t.tagId.toString(),!t.description&&t.content&&(t.description=m(t.content).substr(0,255));const a=await f({defaultParams:t,fieldParams:{}});200===a.code?(o({message:`第${E.value+1}条数据完成^_^`,type:"success"}),setTimeout(()=>{const{pages:t}=e,a=t.split(",");E.value<=a.length-1&&(L(e),E.value=E.value+1)},3e3)):o({message:a.msg||`第${E.value+1}条数据失败^_^`,type:"error"})}catch(t){console.log(t)}};return h(()=>{H()}),(e,r)=>{const p=a,y=w("router-link"),f=l,m=s,j=c,v=n,h=_("permission-disabled");return b(),k("div",t,[x(f,{type:"flex",justify:"end"},{default:C(()=>[x(y,{to:"/collect/add"},{default:C(()=>[x(p,{type:"primary",round:""},{default:C(()=>[...r[0]||(r[0]=[T("新增",-1)])]),_:1})]),_:1})]),_:1}),x(j,{ref_key:"multipleTable",ref:P,data:F.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:K},{default:C(()=>[x(m,{type:"selection"}),x(m,{prop:"id",width:"60",label:"编号"}),x(m,{prop:"taskName",label:"任务名称"}),x(m,{prop:"category",label:"所属栏目"}),x(m,{prop:"charset",label:"编码"},{default:C(e=>[T(S(1===e.row.charset?"UTF-8":"GB2312"),1)]),_:1}),x(m,{prop:"status",label:"状态"},{default:C(e=>[T(S(1===e.row.status?"草稿":"发布"),1)]),_:1}),x(m,{prop:"updatedAt",label:"发布时间"},{default:C(e=>[T(S(e.row.updatedAt),1)]),_:1}),x(m,{fixed:"right",width:"222",label:"操作"},{default:C(e=>[A(x(p,{icon:D(i),circle:"",onClick:t=>(e=>{const t=e.id;I.push({name:"collect-edit",params:{id:t}})})(e.row)},null,8,["icon","onClick"]),[[h,["editor","admin","super"]]]),A(x(p,{icon:D(u),circle:"",onClick:t=>(async e=>{const t=e.id;try{const e=await g(t);200===e.code?(o({message:"删除成功 ^_^",type:"success"}),H()):o({message:e.msg,type:"error"})}catch(a){console.log(a)}})(e.row)},null,8,["icon","onClick"]),[[h,["editor","admin","super"]]]),A((b(),z(p,{type:"primary",round:"",icon:D(d),onClick:t=>L(e.row)},{default:C(()=>[...r[1]||(r[1]=[T("执行",-1)])]),_:1},8,["icon","onClick"])),[[h,["editor","admin","super"]]])]),_:1})]),_:1},8,["data"]),x(f,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:C(()=>[x(v,{background:"",layout:"prev, pager, next",onCurrentChange:J,"page-size":10,total:$.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}})}}});
