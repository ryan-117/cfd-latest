System.register(["./element-plus-legacy.js","./vue-router-legacy.js","./@element-plus-legacy.js","./collect-legacy.js","./article-legacy.js","./index-legacy.js","./@vue-legacy.js","./dayjs-legacy.js","./ace-builds-legacy.js","./lodash-es-legacy.js","./@popperjs-legacy.js","./async-validator-legacy.js","./@ctrl-legacy.js","./memoize-one-legacy.js","./normalize-wheel-es-legacy.js","./pinia-legacy.js","./pinia-plugin-persist-legacy.js","./axios-legacy.js","./js-cookie-legacy.js","./nprogress-legacy.js","./saduo-legacy.js"],function(e,t){"use strict";var a,l,s,c,n,o,r,i,u,d,p,g,y,f,m,j,h,v,w,_,b,k,C,x,T,S,A,D,z;return{setters:[e=>{a=e.g,l=e.u,s=e.v,c=e.x,n=e.y,o=e.a},e=>{r=e.u},e=>{i=e.H,u=e.F,d=e.J},e=>{p=e.l,g=e.b,y=e.a},e=>{f=e.c},e=>{m=e.f},e=>{j=e.r,h=e.W,v=e.n,w=e.ab,_=e.aq,b=e.c,k=e.o,C=e.O,x=e.L,T=e.a3,S=e.Q,A=e.T,D=e.u,z=e.K},null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const t={class:"bg-fff radius-6 pd-20"};e("default",{__name:"index",setup(e){const I=r(),F=j(null),P=j([]),U=j([]),$=j(0),q=j(1),B=j(0),G=h({cid:0,title:"",shortTitle:"",tagId:"",attr:[],source:"",author:"",description:"",img:"",createdAt:new Date,updatedAt:new Date,content:"欢迎使用ChanCMS系统",status:"0",pv:1,link:""}),H=async()=>{try{const e=await p(q.value);200===e.code&&(P.value=[...e.data.list],$.value=e.data.count)}catch(e){console.log(e)}},J=e=>{q.value=e,p()},K=e=>{U.value=e},L=async e=>{try{const{pages:t,titleTag:a,articleTag:l,parseData:s,charset:c,cid:n,status:o}=e,r=t.split(","),i=await y({taskUrl:r[B.value],titleTag:a,articleTag:l,parseData:s,charset:c});if(200===i.code){const{title:e,article:t}=i.data;G.title=e,G.content=t,G.cid=n,G.status=1===o?1:0,M(G)}}catch(t){console.log(t)}},M=async e=>{try{const t={...G};t.attr=t.attr.toString(),t.tagId=t.tagId.toString(),!t.description&&t.content&&(t.description=m(t.content).substr(0,255));const a=await f({defaultParams:t,fieldParams:{}});200===a.code?(o({message:`第${B.value+1}条数据完成^_^`,type:"success"}),setTimeout(()=>{const{pages:t}=e,a=t.split(",");B.value<=a.length-1&&(L(e),B.value=B.value+1)},3e3)):o({message:a.msg||`第${B.value+1}条数据失败^_^`,type:"error"})}catch(t){console.log(t)}};return v(()=>{H()}),(e,r)=>{const p=a,y=w("router-link"),f=l,m=s,j=c,h=n,v=_("permission-disabled");return k(),b("div",t,[C(f,{type:"flex",justify:"end"},{default:x(()=>[C(y,{to:"/collect/add"},{default:x(()=>[C(p,{type:"primary",round:""},{default:x(()=>r[0]||(r[0]=[T("新增")])),_:1})]),_:1})]),_:1}),C(j,{ref_key:"multipleTable",ref:F,data:P.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:K},{default:x(()=>[C(m,{type:"selection"}),C(m,{prop:"id",width:"60",label:"编号"}),C(m,{prop:"taskName",label:"任务名称"}),C(m,{prop:"category",label:"所属栏目"}),C(m,{prop:"charset",label:"编码"},{default:x(e=>[T(S(1===e.row.charset?"UTF-8":"GB2312"),1)]),_:1}),C(m,{prop:"status",label:"状态"},{default:x(e=>[T(S(1===e.row.status?"草稿":"发布"),1)]),_:1}),C(m,{prop:"updatedAt",label:"发布时间"},{default:x(e=>[T(S(e.row.updatedAt),1)]),_:1}),C(m,{fixed:"right",width:"222",label:"操作"},{default:x(e=>[A(C(p,{icon:D(i),circle:"",onClick:t=>(e=>{const t=e.id;I.push({name:"collect-edit",params:{id:t}})})(e.row)},null,8,["icon","onClick"]),[[v,["editor","admin","super"]]]),A(C(p,{icon:D(u),circle:"",onClick:t=>(async e=>{const t=e.id;try{const e=await g(t);200===e.code?(o({message:"删除成功 ^_^",type:"success"}),H()):o({message:e.msg,type:"error"})}catch(a){console.log(a)}})(e.row)},null,8,["icon","onClick"]),[[v,["editor","admin","super"]]]),A((k(),z(p,{type:"primary",round:"",icon:D(d),onClick:t=>L(e.row)},{default:x(()=>r[1]||(r[1]=[T("执行")])),_:2},1032,["icon","onClick"])),[[v,["editor","admin","super"]]])]),_:1})]),_:1},8,["data"]),C(f,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:x(()=>[C(h,{background:"",layout:"prev, pager, next",onCurrentChange:J,"page-size":10,total:$.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}})}}});
