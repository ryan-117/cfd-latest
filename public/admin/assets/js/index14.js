import{f as j,u as V,v as A,x as M,y as N,E as f}from"./element-plus.js";import{u as $}from"./vue-router.js";import{H as z,F}from"./@element-plus.js";import{l as H,a as I}from"./friendlink.js";import{_ as K}from"./index.js";import{r as l,n as L,aj as q,ar as G,c as J,o as g,V as t,L as n,S as d,K as O,a3 as b,P as Q,u as h}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const U={class:"pd-20 bg-fff"},W={__name:"index",setup(X){const y=l(null),p=l([]),v=l([]),m=l(0),u=l(1),k=$(),w=z,C=F;L(()=>{i()});const i=async()=>{try{const e=await H(u.value);e.code===200&&(p.value=e.data.list,m.value=e.data.count)}catch(e){console.log(e)}},x=e=>{u.value=e,i()},E=e=>{v.value=e},D=e=>{k.push({name:"friendlink-edit",params:{id:e.id}})},B=async e=>{try{const o=await I(e.id);o.code===200?(f({message:"删除成功 ^_^",type:"success"}),i()):f({message:o.msg,type:"error"})}catch(o){console.log(o)}};return(e,o)=>{const s=j,S=q("router-link"),_=V,a=A,T=M,P=N,c=G("permission-disabled");return g(),J("div",U,[t(_,{type:"flex",class:"mt-10 mb-10",justify:"end"},{default:n(()=>[d((g(),O(S,{to:"/friendlink/add"},{default:n(()=>[t(s,{type:"primary",round:""},{default:n(()=>[...o[0]||(o[0]=[b("新增",-1)])]),_:1})]),_:1})),[[c,["editor","admin","super"]]])]),_:1}),t(T,{ref_key:"multipleTableRef",ref:y,data:p.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:E},{default:n(()=>[t(a,{type:"selection"}),t(a,{prop:"id",width:"60",label:"编号"}),t(a,{prop:"title",width:"120",label:"标题"}),t(a,{prop:"link",width:"260",label:"链接"}),t(a,{prop:"orderBy",label:"排序"}),t(a,{prop:"createdAt",label:"发布时间"},{default:n(r=>[b(Q(r.row.createdAt),1)]),_:1}),t(a,{fixed:"right",width:"100",label:"操作"},{default:n(r=>[d(t(s,{icon:h(w),circle:"",onClick:R=>D(r.row)},null,8,["icon","onClick"]),[[c,["editor","admin","super"]]]),d(t(s,{icon:h(C),circle:"",onClick:R=>B(r.row)},null,8,["icon","onClick"]),[[c,["editor","admin","super"]]])]),_:1})]),_:1},8,["data"]),t(_,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:n(()=>[t(P,{background:"",layout:"prev, pager, next",onCurrentChange:x,"page-size":10,total:m.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}},he=K(W,[["__scopeId","data-v-b20a598b"]]);export{he as default};
