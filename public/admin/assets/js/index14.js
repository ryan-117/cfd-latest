import{g as j,u as A,v as M,x as N,y as V,a as f}from"./element-plus.js";import{u as $}from"./vue-router.js";import{H as q,F as z}from"./@element-plus.js";import{l as F,a as H}from"./friendlink.js";import{_ as I}from"./index.js";import{r as l,n as K,ab as L,aq as O,c as Q,o as g,O as t,L as n,T as d,K as G,a3 as b,Q as J,u as h}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const U={class:"pd-20 bg-fff"},W={__name:"index",setup(X){const y=l(null),p=l([]),v=l([]),m=l(0),u=l(1),k=$(),w=q,C=z;K(()=>{i()});const i=async()=>{try{const e=await F(u.value);e.code===200&&(p.value=e.data.list,m.value=e.data.count)}catch(e){console.log(e)}},x=e=>{u.value=e,i()},E=e=>{v.value=e},D=e=>{k.push({name:"friendlink-edit",params:{id:e.id}})},T=async e=>{try{const o=await H(e.id);o.code===200?(f({message:"删除成功 ^_^",type:"success"}),i()):f({message:o.msg,type:"error"})}catch(o){console.log(o)}};return(e,o)=>{const s=j,B=L("router-link"),_=A,a=M,R=N,S=V,c=O("permission-disabled");return g(),Q("div",U,[t(_,{type:"flex",class:"mt-10 mb-10",justify:"end"},{default:n(()=>[d((g(),G(B,{to:"/friendlink/add"},{default:n(()=>[t(s,{type:"primary",round:""},{default:n(()=>o[0]||(o[0]=[b("新增")])),_:1})]),_:1})),[[c,["editor","admin","super"]]])]),_:1}),t(R,{ref_key:"multipleTableRef",ref:y,data:p.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:E},{default:n(()=>[t(a,{type:"selection"}),t(a,{prop:"id",width:"60",label:"编号"}),t(a,{prop:"title",width:"120",label:"标题"}),t(a,{prop:"link",width:"260",label:"链接"}),t(a,{prop:"orderBy",label:"排序"}),t(a,{prop:"createdAt",label:"发布时间"},{default:n(r=>[b(J(r.row.createdAt),1)]),_:1}),t(a,{fixed:"right",width:"100",label:"操作"},{default:n(r=>[d(t(s,{icon:h(w),circle:"",onClick:P=>D(r.row)},null,8,["icon","onClick"]),[[c,["editor","admin","super"]]]),d(t(s,{icon:h(C),circle:"",onClick:P=>T(r.row)},null,8,["icon","onClick"]),[[c,["editor","admin","super"]]])]),_:1})]),_:1},8,["data"]),t(_,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:n(()=>[t(S,{background:"",layout:"prev, pager, next",onCurrentChange:x,"page-size":10,total:m.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}},he=I(W,[["__scopeId","data-v-1a039431"]]);export{he as default};
