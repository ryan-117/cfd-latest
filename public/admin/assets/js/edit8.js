import{a as n,r as k,L as q,M as F,s as B,g as I,q as C}from"./element-plus.js";import{u as L,a as M}from"./vue-router.js";import{d as O,u as N}from"./message.js";import{_ as R}from"./index.js";import{r as i,n as j,c,o as f,O as l,L as r,I as A,ac as D,a3 as v}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./@element-plus.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const S={class:"bg-fff pd-20 radius-6"},T={__name:"edit",setup(z){const m=L(),_=M(),e=i({id:0,type:"",title:"",name:"",tel:"",company:"",wechat:"",content:""}),d=i(null),b=[{label:"咨询",value:"1"},{label:"建议",value:"2"},{label:"投诉",value:"3"},{label:"其他",value:"4"}];j(async()=>{e.value.id=_.params.id,await g()});const g=async()=>{try{const o=await O(e.value.id);o.code===200?(delete o.data.updatedAt,Object.assign(e.value,o.data)):n.error(o.msg)}catch(o){console.error(o),n.error("获取详情失败")}},V=()=>{m.go(-1)},y=()=>{d.value.validate(o=>{o?w():console.log("error submit!!")})},w=async()=>{try{const o=await N(e.value);o.code==200?(n.success("更新成功^_^"),m.go(-1)):n.error(o.msg)}catch(o){console.error(o),n.error("更新失败")}};return(o,t)=>{const x=F,E=q,u=k,s=B,p=I,U=C;return f(),c("div",S,[l(U,{ref_key:"paramsForm",ref:d,model:e.value,"label-width":"84px",class:"mt-20"},{default:r(()=>[l(u,{label:"留言类型",rules:[{required:!0,message:"请选择类型",trigger:"blur"}],prop:"type"},{default:r(()=>[l(E,{modelValue:e.value.type,"onUpdate:modelValue":t[0]||(t[0]=a=>e.value.type=a),placeholder:"请选择类型"},{default:r(()=>[(f(),c(A,null,D(b,a=>l(x,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"留言标题",rules:[{required:!0,message:"请输入标题",trigger:"blur"}],prop:"title"},{default:r(()=>[l(s,{modelValue:e.value.title,"onUpdate:modelValue":t[1]||(t[1]=a=>e.value.title=a)},null,8,["modelValue"])]),_:1}),l(u,{label:"姓名",prop:"name",rules:[{required:!0,message:"请输入内容",trigger:"blur"}]},{default:r(()=>[l(s,{modelValue:e.value.name,"onUpdate:modelValue":t[2]||(t[2]=a=>e.value.name=a)},null,8,["modelValue"])]),_:1}),l(u,{label:"手机号",prop:"tel",rules:[{required:!0,message:"请输入内容",trigger:"blur"}]},{default:r(()=>[l(s,{modelValue:e.value.tel,"onUpdate:modelValue":t[3]||(t[3]=a=>e.value.tel=a)},null,8,["modelValue"])]),_:1}),l(u,{label:"公司单位"},{default:r(()=>[l(s,{modelValue:e.value.company,"onUpdate:modelValue":t[4]||(t[4]=a=>e.value.company=a)},null,8,["modelValue"])]),_:1}),l(u,{label:"微信"},{default:r(()=>[l(s,{modelValue:e.value.wechat,"onUpdate:modelValue":t[5]||(t[5]=a=>e.value.wechat=a)},null,8,["modelValue"])]),_:1}),l(u,{label:"留言内容",prop:"content",rules:[{required:!0,message:"请输入内容",trigger:"blur"}]},{default:r(()=>[l(s,{type:"textarea",rows:3,placeholder:"请输入内容",modelValue:e.value.content,"onUpdate:modelValue":t[6]||(t[6]=a=>e.value.content=a)},null,8,["modelValue"])]),_:1}),l(u,{class:"flex"},{default:r(()=>[l(p,{type:"primary",onClick:y},{default:r(()=>t[7]||(t[7]=[v("保存")])),_:1}),l(p,{onClick:V},{default:r(()=>t[8]||(t[8]=[v("取消")])),_:1})]),_:1})]),_:1},8,["model"])])}}},ne=R(T,[["__scopeId","data-v-0001b06f"]]);export{ne as default};
