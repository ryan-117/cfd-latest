import{E as _,r as M,s as U,f as z,q as H,v as K,x as L,y as W,u as A}from"./element-plus.js";import{a as G,u as J}from"./vue-router.js";import{I as O,H as Q,F as X}from"./@element-plus.js";import{s as Y,a as Z}from"./tag.js";import{_ as ee}from"./index.js";import{r as i,W as te,n as oe,w as ae,aj as re,ar as ne,c as se,o as R,a as y,V as o,L as a,u as g,a3 as v,S as k,K as le}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const ie={class:"bg-fff radius-6 pd-20 mb-10"},ce={class:"bg-fff radius-6 pd-20"},de={class:"flex justify-end align-c"},ue={__name:"index",setup(pe){const w=G(),m=J(),b=i(null),I=i(null),n=te({keywords:""}),x=i([]),T=i([]),C=i(0),s=i(1);oe(()=>{const{cur:e=1,keywords:t=""}=w.query;s.value=parseInt(e,10),n.keywords=t,c()}),ae(w,(e,t)=>{if(e.name==="tag-index"){const{cur:r,keywords:p}=e.query;s.value=parseInt(r,10),n.keywords=p,c()}});const h=e=>{e&&b.value.resetFields(),m.replace({name:"tag-index",query:{cur:1,keywords:""}}),c()},c=async()=>{try{const e=await Y(s.value,n.keywords);e.code===200?(x.value=e.data.list,C.value=e.data.count):_({message:e.msg,type:"error"})}catch(e){console.error(e)}},E=()=>{m.replace({name:"tag-index",query:{cur:s.value,keywords:n.keywords}}),c()},V=e=>{s.value=parseInt(e,10),E()},S=e=>{T.value=e},q=e=>{const t=e.id;m.push({name:"tag-edit",params:{id:t}})},B=async e=>{const t=e.id;try{const r=await Z(t);r.code===200?(_({message:"删除成功 ^_^",type:"success"}),c()):_({message:r.msg,type:"error"})}catch(r){console.error(r)}};return(e,t)=>{const r=U,p=M,d=z,P=H,D=re("router-link"),u=K,F=L,j=W,N=A,f=ne("permission-disabled");return R(),se("div",null,[y("div",ie,[o(P,{inline:!0,model:n,ref_key:"formRef",ref:b},{default:a(()=>[o(p,{label:"标题",prop:"keywords"},{default:a(()=>[o(r,{placeholder:"请输入内容","suffix-icon":g(O),clearable:"",onClear:h,modelValue:n.keywords,"onUpdate:modelValue":t[0]||(t[0]=l=>n.keywords=l)},null,8,["suffix-icon","modelValue"])]),_:1}),o(p,null,{default:a(()=>[o(d,{type:"primary",onClick:E,round:""},{default:a(()=>[...t[3]||(t[3]=[v("搜索",-1)])]),_:1}),o(d,{onClick:t[1]||(t[1]=l=>h("formRef")),round:""},{default:a(()=>[...t[4]||(t[4]=[v("清空",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),y("div",ce,[y("div",de,[k((R(),le(D,{to:"/tag/add"},{default:a(()=>[o(d,{type:"primary",round:""},{default:a(()=>[...t[5]||(t[5]=[v("新增",-1)])]),_:1})]),_:1})),[[f,["editor","admin","super"]]])]),o(F,{ref_key:"multipleTableRef",ref:I,data:x.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:S},{default:a(()=>[o(u,{type:"selection"}),o(u,{prop:"id",label:"编号"}),o(u,{prop:"name",label:"名称"}),o(u,{prop:"path",label:"标识"}),o(u,{fixed:"right",width:"100",label:"操作"},{default:a(l=>[k(o(d,{icon:g(Q),circle:"",onClick:$=>q(l.row)},null,8,["icon","onClick"]),[[f,["editor","admin","super"]]]),k(o(d,{icon:g(X),circle:"",onClick:$=>B(l.row)},null,8,["icon","onClick"]),[[f,["editor","admin","super"]]])]),_:1})]),_:1},8,["data"]),o(N,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:a(()=>[o(j,{background:"",layout:"prev, pager, next",onCurrentChange:V,"page-size":10,total:C.value,currentPage:s.value,"onUpdate:currentPage":t[2]||(t[2]=l=>s.value=l),"hide-on-single-page":""},null,8,["total","currentPage"])]),_:1})])])}}},Pe=ee(ue,[["__scopeId","data-v-00a2b31d"]]);export{Pe as default};
