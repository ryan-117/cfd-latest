import{g as S,u as F,v as j,F as q,w as A,b as H,x as L,y as M,a as O}from"./element-plus.js";import{a as P}from"./vue-router.js";import{H as R,F as U,B as z}from"./@element-plus.js";import{l as I,D as J,r as K}from"./dialog2.js";import{g as Q}from"./index.js";import{r as p,W,w as $,n as G,aq as X,c as Y,o as g,O as e,a as Z,L as l,a3 as b,Q as ee,T as y,K as te,H as oe,u as c}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./vue3-ace-editor.js";import"./resize-observer-polyfill.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const ae={class:"bg-fff radius-6 pd-20"},ie={class:"mr-10 ml-10"},Te={__name:"index",setup(le){const v=p([]),m=p(0),u=p(1),_=Q("username"),o=W({dialogVisible:!1,id:0,params:{type_code:""},list:[]}),h=P();$(()=>o.dialogVisible,t=>{t||d()});const d=async()=>{try{let t=o.params;const a=await I(t);if(a.code===200){let s={};a.data.list.forEach(n=>{console.log(),s[n.config_key]=typeof n.config_value=="string"?n.config_value:JSON.parse(n.config_value)}),o.list=[...a.data.list],m.value=a.data.total}}catch(t){console.log(t)}},w=t=>{u.value=t,d()},C=t=>{v.value=t},k=t=>{o.id=t.id,o.dialogVisible=!0},E=()=>{o.id=0,o.dialogVisible=!0},x=async t=>{try{const{id:a}=t;(await K({id:a})).code===200&&(O.success("删除成功 ^_^"),d())}catch(a){console.log(a)}};return G(()=>{o.params.type_code=h.params.id,d()}),(t,a)=>{const s=S,n=F,r=j,V=q,B=H,D=A,T=L,N=M,f=X("permission-disabled");return g(),Y("div",ae,[e(n,{type:"flex",justify:"end"},{default:l(()=>[e(s,{type:"primary",onClick:E,round:""},{default:l(()=>a[1]||(a[1]=[b("新增")])),_:1})]),_:1}),Z("div",ie,[e(T,{data:o.list,"tooltip-effect":"dark","row-key":"id",onSelectionChange:C},{default:l(()=>[e(r,{prop:"id",width:"100",label:"编号"}),e(r,{prop:"type_code",label:"标识"}),e(r,{prop:"config_key",label:"配置名称"}),e(r,{prop:"status",label:"是否启用"},{default:l(i=>[b(ee(i.row.status==1?"启用":"关闭"),1)]),_:1}),e(r,{fixed:"right",width:"200",label:"操作"},{default:l(i=>[y(e(s,{icon:c(R),circle:"",onClick:se=>k(i.row)},null,8,["icon","onClick"]),[[f,["editor","admin","super"]]]),e(V,{width:"220",onConfirm:()=>x(i.row),"confirm-button-text":"确定","cancel-button-text":"取消","icon-color":"#626AEF",title:"你确定吗？要删管理员？"},{reference:l(()=>[y(e(s,{icon:c(U),disabled:c(_)===i.row.username,circle:""},null,8,["icon","disabled"]),[[f,["editor","admin","super"]]])]),_:2},1032,["onConfirm"]),c(_)===i.row.username?(g(),te(D,{key:0,content:"当前登录用户不可删除",effect:"light",placement:"top-start"},{default:l(()=>[e(B,{class:"ml-10 t-4 pointer"},{default:l(()=>[e(c(z),{class:"c-165dff"})]),_:1})]),_:1})):oe("",!0)]),_:1})]),_:1},8,["data"]),e(N,{background:"",layout:"prev, pager, next",total:m.value,"page-size":10,"model-value":u.value,"onUpdate:modelValue":w,"hide-on-single-page":""},null,8,["total","model-value"])]),e(J,{visible:o.dialogVisible,"onUpdate:visible":a[0]||(a[0]=i=>o.dialogVisible=i),id:o.id,type_code:o.params.type_code},null,8,["visible","id","type_code"])])}}};export{Te as default};
