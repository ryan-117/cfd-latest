import{f as T,u as F,v as P,F as j,w as A,a as H,x as L,y as M,E as R}from"./element-plus.js";import{a as U}from"./vue-router.js";import{H as q,F as z,B as I}from"./@element-plus.js";import{l as J,D as K,r as O}from"./dialog2.js";import{g as W}from"./index.js";import{r as p,W as $,w as G,n as Q,ar as X,c as Y,o as g,V as e,a as Z,L as l,a3 as b,P as ee,S as y,K as te,H as oe,u as c}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./vue3-ace-editor.js";import"./resize-observer-polyfill.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const ae={class:"bg-fff radius-6 pd-20"},ie={class:"mr-10 ml-10"},Se={__name:"index",setup(le){const v=p([]),m=p(0),u=p(1),_=W("username"),o=$({dialogVisible:!1,id:0,params:{type_code:""},list:[]}),h=U();G(()=>o.dialogVisible,t=>{t||d()});const d=async()=>{try{let t=o.params;const a=await J(t);if(a.code===200){let s={};a.data.list.forEach(n=>{console.log(),s[n.config_key]=typeof n.config_value=="string"?n.config_value:JSON.parse(n.config_value)}),o.list=[...a.data.list],m.value=a.data.total}}catch(t){console.log(t)}},w=t=>{u.value=t,d()},C=t=>{v.value=t},E=t=>{o.id=t.id,o.dialogVisible=!0},k=()=>{o.id=0,o.dialogVisible=!0},V=async t=>{try{const{id:a}=t;(await O({id:a})).code===200&&(R.success("删除成功 ^_^"),d())}catch(a){console.log(a)}};return Q(()=>{o.params.type_code=h.params.id,d()}),(t,a)=>{const s=T,n=F,r=P,x=j,B=H,D=A,S=L,N=M,f=X("permission-disabled");return g(),Y("div",ae,[e(n,{type:"flex",justify:"end"},{default:l(()=>[e(s,{type:"primary",onClick:k,round:""},{default:l(()=>[...a[1]||(a[1]=[b("新增",-1)])]),_:1})]),_:1}),Z("div",ie,[e(S,{data:o.list,"tooltip-effect":"dark","row-key":"id",onSelectionChange:C},{default:l(()=>[e(r,{prop:"id",width:"100",label:"编号"}),e(r,{prop:"type_code",label:"标识"}),e(r,{prop:"config_key",label:"配置名称"}),e(r,{prop:"status",label:"是否启用"},{default:l(i=>[b(ee(i.row.status==1?"启用":"关闭"),1)]),_:1}),e(r,{fixed:"right",width:"200",label:"操作"},{default:l(i=>[y(e(s,{icon:c(q),circle:"",onClick:se=>E(i.row)},null,8,["icon","onClick"]),[[f,["editor","admin","super"]]]),e(x,{width:"220",onConfirm:()=>V(i.row),"confirm-button-text":"确定","cancel-button-text":"取消","icon-color":"#626AEF",title:"你确定吗？要删管理员？"},{reference:l(()=>[y(e(s,{icon:c(z),disabled:c(_)===i.row.username,circle:""},null,8,["icon","disabled"]),[[f,["editor","admin","super"]]])]),_:2},1032,["onConfirm"]),c(_)===i.row.username?(g(),te(D,{key:0,content:"当前登录用户不可删除",effect:"light",placement:"top-start"},{default:l(()=>[e(B,{class:"ml-10 t-4 pointer"},{default:l(()=>[e(c(I),{class:"c-165dff"})]),_:1})]),_:1})):oe("",!0)]),_:1})]),_:1},8,["data"]),e(N,{background:"",layout:"prev, pager, next",total:m.value,"page-size":10,"model-value":u.value,"onUpdate:modelValue":w,"hide-on-single-page":""},null,8,["total","model-value"])]),e(K,{visible:o.dialogVisible,"onUpdate:visible":a[0]||(a[0]=i=>o.dialogVisible=i),id:o.id,type_code:o.params.type_code},null,8,["visible","id","type_code"])])}}};export{Se as default};
