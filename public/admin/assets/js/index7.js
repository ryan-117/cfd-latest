import{r as F,s as H,f as j,q,I as R,v as U,x as $,E as A}from"./element-plus.js";import{I as K,H as W,F as z}from"./@element-plus.js";import{t as G,a as J}from"./index.js";import{l as O,D as P,r as Q}from"./dialog4.js";import{d as X}from"./dayjs.js";import{W as h,n as E,w as Z,r as m,ar as ee,c as v,o as d,a as y,V as t,L as l,u as g,a3 as k,S as p,K as x}from"./@vue.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vue-router.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";import"./ace-builds.js";/* empty css     */const oe={class:"bg-fff radius-6 pd-20 mb-10"},te={class:"bg-fff radius-6 pd-20"},ae={class:"flex justify-end"},le={key:0},se={key:1},De={__name:"index",setup(ie){const a=h({dialogVisible:!1,id:0,params:{},list:[]});E(()=>{c()}),Z(()=>a.dialogVisible,o=>{o||c()});const c=async()=>{try{const o=await O();o.code===200&&(o.data.list.forEach(e=>{e.id=Number(e.id),e.create_time=X(e.create_time).format("YYYY-MM-DD HH:mm:ss")}),a.list=o.data.list,u.value=!1)}catch(o){console.log(o)}},C=o=>{a.id=o.id,a.dialogVisible=!0},D=()=>{a.id=0,a.dialogVisible=!0},B=async o=>{console.log(o);try{(await Q({id:o.id})).code===200&&(A({message:"删除成功",type:"success"}),c())}catch(e){console.log(e)}},i=h({keywords:""}),u=m(!0),w=m([]),T=m(null),I=m([]),L=()=>{i.keywords="",w.value=[],I.value=[],f()},f=async()=>{try{const o=i.keywords,e=await fetch(o);if(e.code===200){const _=G(e.data);w.value=J(_),u.value=!1}}catch(o){console.log(o)}};return E(()=>{f()}),(o,e)=>{const _=H,V=F,r=j,M=q,n=U,N=$,b=ee("permission-disabled"),S=R;return d(),v("div",null,[y("div",oe,[t(M,{inline:!0,model:i},{default:l(()=>[t(V,{label:"名称",prop:"keywords"},{default:l(()=>[t(_,{placeholder:"请输入栏目名称","suffix-icon":g(K),modelValue:i.keywords,"onUpdate:modelValue":e[0]||(e[0]=s=>i.keywords=s),clearable:""},null,8,["suffix-icon","modelValue"])]),_:1}),t(V,null,{default:l(()=>[t(r,{type:"primary",onClick:f,round:""},{default:l(()=>[...e[2]||(e[2]=[k("搜索",-1)])]),_:1}),t(r,{onClick:L,round:""},{default:l(()=>[...e[3]||(e[3]=[k("清空",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),y("div",te,[y("div",ae,[p((d(),x(r,{type:"primary",onClick:D,round:""},{default:l(()=>[...e[4]||(e[4]=[k("新增",-1)])]),_:1})),[[b,["editor","admin","super"]]])]),p((d(),x(N,{ref_key:"multipleTableRef",ref:T,data:a.list,"tooltip-effect":"dark","row-key":"id"},{default:l(()=>[t(n,{prop:"id",label:"角色编号"}),t(n,{prop:"name",align:"center",label:"角色名称"}),t(n,{prop:"key",align:"center",label:"权限标识"}),t(n,{prop:"status",label:"状态"},{default:l(s=>[s.row.status=="1"?(d(),v("p",le,"启用")):(d(),v("p",se,"停用"))]),_:1}),t(n,{fixed:"right",label:"操作",width:"160"},{default:l(s=>[p(t(r,{icon:g(W),circle:"",onClick:Y=>C(s.row)},null,8,["icon","onClick"]),[[b,["editor","admin","super"]]]),p(t(r,{icon:g(z),circle:"",onClick:Y=>B(s.row)},null,8,["icon","onClick"]),[[b,["editor","admin","super"]]])]),_:1})]),_:1},8,["data"])),[[S,u.value]])]),t(P,{visible:a.dialogVisible,"onUpdate:visible":e[1]||(e[1]=s=>a.dialogVisible=s),id:a.id,onSuccess:c},null,8,["visible","id"])])}}};export{De as default};
