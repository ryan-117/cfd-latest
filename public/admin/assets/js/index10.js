import{r as M,s as H,f as K,q as P,I as U,v as W,x as z,E as h}from"./element-plus.js";import{I as A,v as G,H as J,F as O}from"./@element-plus.js";import{s as Q,b as X,d as Y}from"./category.js";import{_ as Z,t as ee,a as te}from"./index.js";import{u as oe}from"./vue-router.js";import{W as ae,r as p,n as se,aj as re,ar as x,c as d,o as r,a as k,V as o,L as a,u,a3 as m,S as _,K as E,P as le}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const ne={class:"bg-fff radius-6 pd-20 mb-10"},ie={class:"bg-fff radius-6 pd-20"},de={class:"flex justify-end"},ce={key:0},pe={key:1},ue={key:0},me={key:1},_e={__name:"index",setup(fe){const i=ae({keywords:""}),v=p(!0),f=p([]),V=p(null),$=p([]),B=oe(),w=()=>{i.keywords="",f.value=[],$.value=[],y()},y=async()=>{try{const t=i.keywords,e=await Q(t);if(e.code===200){const c=ee(e.data);f.value=te(c),v.value=!1}}catch(t){console.log(t)}},I=t=>{const e=t.id;B.push({name:"category-edit",params:{id:e}})},D=async t=>{try{const e=await X(t);if(e.code===200)return e.data.length>0}catch(e){console.log(e)}return!1},S=async t=>{try{const e=await Y(t);e.code===200?(h({message:"删除成功 ^_^",type:"success"}),w()):h({message:e.msg,type:"error"})}catch(e){console.log(e)}},T=t=>{let e;t.type===0?e="".concat(location.origin).concat(t.path,"/index.html"):e="".concat(location.origin).concat(t.path,"/page.html"),window.open(e)},F=async t=>{const e=t.id;if(await D(e)){h({message:"我下面还有栏目啊 ^_^",type:"warning"});return}S(e)};return se(()=>{y()}),(t,e)=>{const c=H,b=M,l=K,L=P,N=re("router-link"),n=W,R=z,j=x("permission"),g=x("permission-disabled"),q=U;return r(),d("div",null,[k("div",ne,[o(L,{inline:!0,model:i},{default:a(()=>[o(b,{label:"名称",prop:"keywords"},{default:a(()=>[o(c,{placeholder:"请输入栏目名称","suffix-icon":u(A),modelValue:i.keywords,"onUpdate:modelValue":e[0]||(e[0]=s=>i.keywords=s),clearable:""},null,8,["suffix-icon","modelValue"])]),_:1}),o(b,null,{default:a(()=>[o(l,{type:"primary",onClick:y,round:""},{default:a(()=>[...e[1]||(e[1]=[m("搜索",-1)])]),_:1}),o(l,{onClick:w,round:""},{default:a(()=>[...e[2]||(e[2]=[m("清空",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),k("div",ie,[k("div",de,[_((r(),E(N,{to:"/category/add"},{default:a(()=>[o(l,{type:"primary",round:""},{default:a(()=>[...e[3]||(e[3]=[m("新增",-1)])]),_:1})]),_:1})),[[j,["editor","admin","super"]]])]),_((r(),E(R,{ref_key:"multipleTableRef",ref:V,data:f.value,"tooltip-effect":"dark","row-key":"name","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:a(()=>[o(n,{prop:"name",label:"栏目名称",width:"140"}),o(n,{prop:"id",align:"center",label:"编号"}),o(n,{prop:"type",label:"类型",width:"80"},{default:a(s=>[s.row.type==0?(r(),d("p",ce,"栏目")):(r(),d("p",pe,"单页"))]),_:1}),o(n,{prop:"orderBy",align:"center",label:"排序"},{default:a(s=>[m(le(s.row.orderBy),1)]),_:1}),o(n,{prop:"status",label:"状态"},{default:a(s=>[s.row.status==0?(r(),d("p",ue,"显示")):(r(),d("p",me,"隐藏"))]),_:1}),o(n,{fixed:"right",label:"操作",width:"160"},{default:a(s=>[o(l,{icon:u(G),circle:"",onClick:C=>T(s.row)},null,8,["icon","onClick"]),_(o(l,{icon:u(J),circle:"",onClick:C=>I(s.row)},null,8,["icon","onClick"]),[[g,["editor","admin","super"]]]),_(o(l,{icon:u(O),circle:"",onClick:C=>F(s.row)},null,8,["icon","onClick"]),[[g,["editor","admin","super"]]])]),_:1})]),_:1},8,["data"])),[[q,v.value]])])])}}},Re=Z(_e,[["__scopeId","data-v-2928b038"]]);export{Re as default};
