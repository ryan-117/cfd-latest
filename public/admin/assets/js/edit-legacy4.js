System.register(["./element-plus-legacy.js","./vue-router-legacy.js","./field-legacy.js","./model-legacy.js","./index-legacy.js","./@vue-legacy.js","./dayjs-legacy.js","./ace-builds-legacy.js","./@element-plus-legacy.js","./lodash-es-legacy.js","./@popperjs-legacy.js","./async-validator-legacy.js","./@ctrl-legacy.js","./memoize-one-legacy.js","./normalize-wheel-es-legacy.js","./pinia-legacy.js","./pinia-plugin-persist-legacy.js","./axios-legacy.js","./js-cookie-legacy.js","./nprogress-legacy.js","./saduo-legacy.js"],function(e,l){"use strict";var a,u,t,s,o,n,d,c,r,m,i,g,y,p,b,f,v,j,V,_,h,w,U,x;return{setters:[e=>{a=e.r,u=e.s,t=e.L,s=e.M,o=e.g,n=e.q,d=e.a},e=>{c=e.a,r=e.u},e=>{m=e.d,i=e.u},e=>{g=e.h},e=>{y=e._},e=>{p=e.r,b=e.W,f=e.n,v=e.c,j=e.o,V=e.O,_=e.L,h=e.I,w=e.ac,U=e.a,x=e.a3},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent="/*$vite$:1*/",document.head.appendChild(l);const k={class:"bg-fff pd-20 radius-6"};e("default",y({__name:"edit",setup(e){const l=p(null),y=b({id:"",mid:"",tableName:"",cname:"",ename:"",type:"",val:"",defaultVal:"",length:"",orderBy:"0"}),q=[{value:"1",label:"单行文本"},{value:"2",label:"多行文本 "},{value:"3",label:"下拉菜单"},{value:"4",label:"单选"},{value:"5",label:"多选 "},{value:"6",label:"时间和日期 "},{value:"7",label:"数字 "},{value:"8",label:"多图上传 "},{value:"9",label:"富文本 "}],N=[{required:!0,message:"请输入中文名称",trigger:"blur"}],B=[{required:!0,message:"请输入英文名称",trigger:"blur"}],C=[{required:!0,message:"请选择类型",trigger:"blur"}],z=c(),F=r();f(async()=>{const{fid:e,mid:l,tableName:a}=z.query;y.id=e,y.mid=l,y.tableName=a,await I()});const I=async()=>{try{const e=await m(y.id);200===e.code&&(Object.assign(y,e.data,{old_ename:e.data.ename}),L(y.mid))}catch(e){console.error(e)}},L=async e=>{try{const l=await g(e);l?.data?.has?.length>0?console.log("Field is used"):console.log("Field is not used")}catch(l){console.log(l)}},O=()=>{l.value.validate(async e=>{if(!e)return console.log("error submit!!"),!1;await $()})},$=async()=>{try{const e=await i(y);200===e.code?d({message:"更新成功^_^",type:"success"}):d({message:e.msg,type:"error"}),F.go(-1)}catch(e){console.log(e)}};return(e,d)=>{const c=u,r=a,m=s,i=t,g=o,p=n;return j(),v("div",k,[V(p,{ref_key:"formRef",ref:l,model:y,"label-width":"100px",class:"mt-20"},{default:_(()=>[V(r,{label:"中文名称",prop:"cname",rules:N},{default:_(()=>[V(c,{modelValue:y.cname,"onUpdate:modelValue":d[0]||(d[0]=e=>y.cname=e),placeholder:"请输入字段中文名称"},null,8,["modelValue"])]),_:1}),V(r,{label:"字段名称",prop:"ename",rules:B},{default:_(()=>[V(c,{modelValue:y.ename,"onUpdate:modelValue":d[1]||(d[1]=e=>y.ename=e),placeholder:"请输入英文小驼峰方式，例：bookName"},null,8,["modelValue"])]),_:1}),V(r,{label:"字段类型",rules:C},{default:_(()=>[V(i,{modelValue:y.type,"onUpdate:modelValue":d[2]||(d[2]=e=>y.type=e),placeholder:"请选择"},{default:_(()=>[(j(),v(h,null,w(q,e=>V(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),V(r,{label:"字段选项"},{default:_(()=>[V(c,{modelValue:y.defaultVal,"onUpdate:modelValue":d[3]||(d[3]=e=>y.defaultVal=e),rows:2,type:"textarea",placeholder:"单选、多选、下拉框，请填写json格式。"},null,8,["modelValue"]),d[7]||(d[7]=U("p",{class:"f-12 c-999"},'例如：{"options":[{"label":"本地下载","value":"1"},{"label":"电信下载","value":"2"}]}',-1))]),_:1}),V(r,{label:"默认值"},{default:_(()=>[V(c,{modelValue:y.val,"onUpdate:modelValue":d[4]||(d[4]=e=>y.val=e)},null,8,["modelValue"])]),_:1}),V(r,{label:"排序"},{default:_(()=>[V(c,{modelValue:y.orderBy,"onUpdate:modelValue":d[5]||(d[5]=e=>y.orderBy=e)},null,8,["modelValue"])]),_:1}),V(r,{label:"字段长度"},{default:_(()=>[V(c,{modelValue:y.length,"onUpdate:modelValue":d[6]||(d[6]=e=>y.length=e)},null,8,["modelValue"])]),_:1}),V(r,null,{default:_(()=>[V(g,{type:"primary",onClick:O},{default:_(()=>d[8]||(d[8]=[x("保存")])),_:1})]),_:1})]),_:1},8,["model"])])}}},[["__scopeId","data-v-692047c4"]]))}}});
