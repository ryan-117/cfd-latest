import{a as i,q as F,r as L,L as P,M as x,B as W,C as M,g as O,n as R}from"./element-plus.js";import{h as m,A as p}from"./index.js";import{W as T,r as q,n as C,aq as $,c as b,o as r,O as l,L as o,I as j,ac as D,K as v,a3 as c,T as N}from"./@vue.js";let U=()=>m({url:"".concat(p.BASE_API,"/cms/site/info"),method:"get"}),z=_=>m({url:"".concat(p.BASE_API,"/cms/site/update"),method:"post",data:_}),G=()=>m({url:"".concat(p.BASE_API,"/cms/sysApp/folder"),method:"get"});const K={class:"mr-10 ml-10"},H={__name:"config",setup(_){const a=T({loading:!0,folderList:[],set:{id:0,template:"default",uploadWay:"1"}}),f=q(null);C(async()=>{await g(),await E()});async function E(){try{const e=await G();e.code===200&&e.data.forEach(t=>{a.folderList.push({label:t,value:t})})}catch(e){console.log(e)}}async function g(){try{const e=await U();if(e.code===200){const{id:t,template:n,uploadWay:d}=e.data;a.loading=!1,a.set={id:t,template:n,uploadWay:d}}else i({message:e.msg,type:"error"})}catch(e){console.log(e)}}async function w(){try{const e=await z(a.set);e.code===200?(i({message:"更新成功^_^",type:"success"}),await g()):i({message:e.msg,type:"error"})}catch(e){console.log(e)}}function A(){f.value.validate(async e=>{if(e)await w();else return console.log("error submit!!"),!1})}return(e,t)=>{const n=x,d=P,u=L,y=M,S=W,B=O,V=F,h=R,I=$("permission-disabled");return r(),b("div",K,[l(h,{label:"应用配置",class:"mt-20",name:"config"},{default:o(()=>[l(V,{ref_key:"setFormRef",ref:f,model:a.set,"label-width":"120px"},{default:o(()=>[l(u,{prop:"template",label:"模板"},{default:o(()=>[l(d,{modelValue:a.set.template,"onUpdate:modelValue":t[0]||(t[0]=s=>a.set.template=s),placeholder:"请选择模板"},{default:o(()=>[(r(!0),b(j,null,D(a.folderList,(s,k)=>(r(),v(n,{key:k,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"上传方式"},{default:o(()=>[l(S,{modelValue:a.set.uploadWay,"onUpdate:modelValue":t[1]||(t[1]=s=>a.set.uploadWay=s),class:"ml-4"},{default:o(()=>[l(y,{value:"1"},{default:o(()=>t[2]||(t[2]=[c("普通")])),_:1}),l(y,{value:"2"},{default:o(()=>t[3]||(t[3]=[c("七牛云")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,null,{default:o(()=>[N((r(),v(B,{type:"primary",onClick:A},{default:o(()=>t[4]||(t[4]=[c("保存")])),_:1})),[[I,["editor","admin","super"]]])]),_:1})]),_:1},8,["model"])]),_:1})])}}},Y=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));export{H as _,Y as c,U as g,z as u};
