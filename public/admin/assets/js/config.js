import{E as p,q as L,r as S,L as h,M as x,B as A,C as I,f as W,n as R}from"./element-plus.js";import{g as C,u as M}from"./index23.js";import{h as P,A as q}from"./index.js";import{W as D,r as N,n as T,ar as U,c as _,o as r,V as l,L as a,I as G,ab as K,K as y,a3 as d,S as O}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./@element-plus.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vue-router.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */let $=()=>P({url:"".concat(q.BASE_API,"/cms/sysApp/folder"),method:"get"});const j={class:"mr-10 ml-10"},fe={__name:"config",setup(z){const o=D({loading:!0,folderList:[],set:{id:0,template:"default",uploadWay:"1"}}),u=N(null);T(async()=>{await c(),await g()});async function g(){try{const e=await $();e.code===200&&e.data.forEach(t=>{o.folderList.push({label:t,value:t})})}catch(e){console.log(e)}}async function c(){try{const e=await C();if(e.code===200){const{id:t,template:n,uploadWay:i}=e.data;o.loading=!1,o.set={id:t,template:n,uploadWay:i}}else p({message:e.msg,type:"error"})}catch(e){console.log(e)}}async function b(){try{const e=await M(o.set);e.code===200?(p({message:"更新成功^_^",type:"success"}),await c()):p({message:e.msg,type:"error"})}catch(e){console.log(e)}}function v(){u.value.validate(async e=>{if(e)await b();else return console.log("error submit!!"),!1})}return(e,t)=>{const n=x,i=h,m=S,f=I,E=A,w=W,V=L,k=R,B=U("permission-disabled");return r(),_("div",j,[l(k,{label:"应用配置",class:"mt-20",name:"config"},{default:a(()=>[l(V,{ref_key:"setFormRef",ref:u,model:o.set,"label-width":"120px"},{default:a(()=>[l(m,{prop:"template",label:"模板"},{default:a(()=>[l(i,{modelValue:o.set.template,"onUpdate:modelValue":t[0]||(t[0]=s=>o.set.template=s),placeholder:"请选择模板"},{default:a(()=>[(r(!0),_(G,null,K(o.folderList,(s,F)=>(r(),y(n,{key:F,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"上传方式"},{default:a(()=>[l(E,{modelValue:o.set.uploadWay,"onUpdate:modelValue":t[1]||(t[1]=s=>o.set.uploadWay=s),class:"ml-4"},{default:a(()=>[l(f,{value:"1"},{default:a(()=>[...t[2]||(t[2]=[d("普通",-1)])]),_:1}),l(f,{value:"2"},{default:a(()=>[...t[3]||(t[3]=[d("七牛云",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(m,null,{default:a(()=>[O((r(),y(w,{type:"primary",onClick:v},{default:a(()=>[...t[4]||(t[4]=[d("保存",-1)])]),_:1})),[[B,["editor","admin","super"]]])]),_:1})]),_:1},8,["model"])]),_:1})])}}};export{fe as default};
