import{r as U,s as $,f as j,q as A,I as H,v as K,x as W,E as z}from"./element-plus.js";import{I as G,H as J,F as O}from"./@element-plus.js";import{t as V,a as C}from"./index.js";import{l as P,D as Q,r as X}from"./dialog3.js";import{W as E,w as Y,n as x,r as m,ar as Z,c as g,o as c,a as h,V as t,L as l,u as w,a3 as y,S as f,K as D}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vue-router.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const ee={class:"bg-fff radius-6 pd-20 mb-10"},oe={class:"bg-fff radius-6 pd-20"},te={class:"flex justify-end"},le={key:0},ae={key:1},xe={__name:"index",setup(ie){const a=E({dialogVisible:!1,id:0,params:{},list:[]});Y(()=>a.dialogVisible,o=>{o||p()}),x(()=>{p()});const p=async()=>{try{const o=await P();if(o.code===200){o.data.list.forEach(r=>{r.id=Number(r.id)});const e=V(o.data.list);u.value=C(e),_.value=!1}}catch(o){console.log(o)}},B=o=>{a.id=parseInt(o.id),a.dialogVisible=!0},I=()=>{a.id=0,a.dialogVisible=!0},T=async o=>{console.log(o);try{(await X({id:o.id})).code===200&&(z({message:"删除成功",type:"success"}),p())}catch(e){console.log(e)}},n=E({keywords:""}),_=m(!0),u=m([]),L=m(null),N=m([]),S=()=>{n.keywords="",u.value=[],N.value=[],b()},b=async()=>{try{const o=n.keywords,e=await fetch(o);if(e.code===200){const r=V(e.data);u.value=C(r),_.value=!1}}catch(o){console.log(o)}};return x(()=>{b()}),(o,e)=>{const r=$,k=U,d=j,F=A,s=K,q=W,v=Z("permission-disabled"),M=H;return c(),g("div",null,[h("div",ee,[t(F,{inline:!0,model:n},{default:l(()=>[t(k,{label:"名称",prop:"keywords"},{default:l(()=>[t(r,{placeholder:"请输入栏目名称","suffix-icon":w(G),modelValue:n.keywords,"onUpdate:modelValue":e[0]||(e[0]=i=>n.keywords=i),clearable:""},null,8,["suffix-icon","modelValue"])]),_:1}),t(k,null,{default:l(()=>[t(d,{type:"primary",onClick:b,round:""},{default:l(()=>[...e[2]||(e[2]=[y("搜索",-1)])]),_:1}),t(d,{onClick:S,round:""},{default:l(()=>[...e[3]||(e[3]=[y("清空",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),h("div",oe,[h("div",te,[f((c(),D(d,{type:"primary",onClick:I,round:""},{default:l(()=>[...e[4]||(e[4]=[y("新增",-1)])]),_:1})),[[v,["editor","admin","super"]]])]),f((c(),D(q,{ref_key:"multipleTableRef",ref:L,data:u.value,"tooltip-effect":"dark","row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:l(()=>[t(s,{prop:"title",label:"菜单管理",width:"140"}),t(s,{prop:"path",align:"center",label:"路由"}),t(s,{prop:"component",align:"center",label:"组件路径"}),t(s,{prop:"perms",align:"center",label:"权限标识"}),t(s,{prop:"order_num",align:"center",width:"60",label:"排序"}),t(s,{prop:"is_show",width:"60",label:"状态"},{default:l(i=>[i.row.is_show=="1"?(c(),g("p",le,"显示")):(c(),g("p",ae,"隐藏"))]),_:1}),t(s,{fixed:"right",label:"操作",width:"160"},{default:l(i=>[f(t(d,{icon:w(J),circle:"",onClick:R=>B(i.row)},null,8,["icon","onClick"]),[[v,["editor","admin","super"]]]),f(t(d,{icon:w(O),circle:"",onClick:R=>T(i.row)},null,8,["icon","onClick"]),[[v,["editor","admin","super"]]])]),_:1})]),_:1},8,["data"])),[[M,_.value]])]),t(Q,{visible:a.dialogVisible,"onUpdate:visible":e[1]||(e[1]=i=>a.dialogVisible=i),id:a.id,onSuccess:p},null,8,["visible","id"])])}}};export{xe as default};
