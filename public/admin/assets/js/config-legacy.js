System.register(["./element-plus-legacy.js","./index-legacy.js","./@vue-legacy.js"],function(e,a){"use strict";var l,t,o,s,u,d,n,c,r,i,m,f,p,y,g,_,b,v,h,w,A,S,V,W;return{setters:[e=>{l=e.a,t=e.q,o=e.r,s=e.L,u=e.M,d=e.B,n=e.C,c=e.g,r=e.n},e=>{i=e.h,m=e.A},e=>{f=e.W,p=e.r,y=e.n,g=e.aq,_=e.c,b=e.o,v=e.O,h=e.L,w=e.I,A=e.ac,S=e.K,V=e.a3,W=e.T}],execute:function(){let a=e("g",()=>i({url:`${m.BASE_API}/cms/site/info`,method:"get"})),j=e("u",e=>i({url:`${m.BASE_API}/cms/site/update`,method:"post",data:e}));const L={class:"mr-10 ml-10"},B=e("_",{__name:"config",setup(e){const B=f({loading:!0,folderList:[],set:{id:0,template:"default",uploadWay:"1"}}),E=p(null);async function I(){try{const e=await a();if(200===e.code){const{id:a,template:l,uploadWay:t}=e.data;B.loading=!1,B.set={id:a,template:l,uploadWay:t}}else l({message:e.msg,type:"error"})}catch(e){console.log(e)}}function P(){E.value.validate(async e=>{if(!e)return console.log("error submit!!"),!1;await async function(){try{const e=await j(B.set);200===e.code?(l({message:"更新成功^_^",type:"success"}),await I()):l({message:e.msg,type:"error"})}catch(e){console.log(e)}}()})}return y(async()=>{await I(),await async function(){try{const e=await i({url:`${m.BASE_API}/cms/sysApp/folder`,method:"get"});200===e.code&&e.data.forEach(e=>{B.folderList.push({label:e,value:e})})}catch(e){console.log(e)}}()}),(e,a)=>{const l=u,i=s,m=o,f=n,p=d,y=c,j=t,I=r,k=g("permission-disabled");return b(),_("div",L,[v(I,{label:"应用配置",class:"mt-20",name:"config"},{default:h(()=>[v(j,{ref_key:"setFormRef",ref:E,model:B.set,"label-width":"120px"},{default:h(()=>[v(m,{prop:"template",label:"模板"},{default:h(()=>[v(i,{modelValue:B.set.template,"onUpdate:modelValue":a[0]||(a[0]=e=>B.set.template=e),placeholder:"请选择模板"},{default:h(()=>[(b(!0),_(w,null,A(B.folderList,(e,a)=>(b(),S(l,{key:a,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),v(m,{label:"上传方式"},{default:h(()=>[v(p,{modelValue:B.set.uploadWay,"onUpdate:modelValue":a[1]||(a[1]=e=>B.set.uploadWay=e),class:"ml-4"},{default:h(()=>[v(f,{value:"1"},{default:h(()=>a[2]||(a[2]=[V("普通")])),_:1}),v(f,{value:"2"},{default:h(()=>a[3]||(a[3]=[V("七牛云")])),_:1})]),_:1},8,["modelValue"])]),_:1}),v(m,null,{default:h(()=>[W((b(),S(y,{type:"primary",onClick:P},{default:h(()=>a[4]||(a[4]=[V("保存")])),_:1})),[[k,["editor","admin","super"]]])]),_:1})]),_:1},8,["model"])]),_:1})])}}}),E=Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"}));e("c",E)}}});
