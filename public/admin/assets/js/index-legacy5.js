System.register(["./element-plus-legacy.js","./@vue-legacy.js","./vue-router-legacy.js","./vue3-puzzle-vcode-legacy.js","./index-legacy.js","./login_log-legacy.js","./js-cookie-legacy.js","./dayjs-legacy.js","./ace-builds-legacy.js","./@element-plus-legacy.js","./lodash-es-legacy.js","./@popperjs-legacy.js","./async-validator-legacy.js","./@ctrl-legacy.js","./memoize-one-legacy.js","./normalize-wheel-es-legacy.js","./pinia-legacy.js","./pinia-plugin-persist-legacy.js","./axios-legacy.js","./nprogress-legacy.js","./saduo-legacy.js"],function(e,l){"use strict";var t,a,s,o,n,r,c,i,u,d,p,g,m,y,f,h,v,w,x,j,b,A,I,_,P,$,k,C;return{setters:[e=>{t=e.q,a=e.r,s=e.s,o=e.f,n=e.t},e=>{r=e.W,c=e.r,i=e.n,u=e.c,d=e.a,p=e.V,g=e.L,m=e.af,y=e.u,f=e.I,h=e.o,v=e.a3},e=>{w=e.u,x=e.a},e=>{j=e.M},e=>{b=e.A,A=e.h,I=e._,_=e.u,P=e.s},e=>{$=e.g,k=e.d,C=e.c},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent=".login-bg[data-v-8976c62e]{background-image:linear-gradient(300deg,#778cca,#65de83);height:100vh;border-right:10px solid #efeffe;width:360px}.icon[data-v-8976c62e]{width:82px;height:82px;padding:4px;margin-right:5px}.login-wrap[data-v-8976c62e]{width:calc(100vw - 360px)}.login-wrap .login[data-v-8976c62e]{display:flex;flex-direction:column;height:calc(100vh - 130px);margin-bottom:70px}.login-wrap .login .title[data-v-8976c62e]{font-size:36px;margin-bottom:20px;color:#fff;text-align:center;font-weight:lighter}.login-wrap .login .login-form[data-v-8976c62e]{width:400px}.sends[data-v-8976c62e]{height:calc(100vh - 120px)}.love[data-v-8976c62e]{letter-spacing:3px}@media screen and (max-width:768px){.login-bg[data-v-8976c62e]{display:none}}\n/*$vite$:1*/",document.head.appendChild(l);class S{static API=b.BASE_API;version(){return"v.1.0"}static get(e={}){return A({url:`${S.API}/cms/get`,method:"GET",params:e,withCredentials:!1})}static post(e={}){return A({url:`${S.API}/cms/post`,method:"POST",data:e})}static put(e={}){return A({url:`${S.API}/cms/put`,method:"PUT",data:e})}static patch(e={}){return A({url:`${S.API}/cms/patch`,method:"PATCH",data:e})}static delete(){return A({url:`${S.API}/cms/delete?id=1`,method:"Delete"})}static upload=e=>A({url:`${S.API}/cms/delete?id=1`,method:"post",headers:{"Content-type":"multipart/form-data"},data:e})}class V extends S{constructor(e){super(e)}static toLogin(e){return A({url:`${b.BASE_API}/base/user/login`,method:"post",data:e})}static userInfo(){return A({url:`${b.BASE_API}/base/user/detail`,method:"get"})}static menuList(){return new Promise((e,l)=>{setTimeout(()=>{let l=asyncRoutes;e({code:200,data:l})},300)})}}const z={class:"flex"},T={class:"login-wrap flex justify-center items-center flex-col flex-1"},E={class:"login flex flex-col justify-center items-center w-full"};e("default",I({__name:"index",setup(e){const l=w(),b=x(),A=_(),I=r({username:"",password:""}),S=c(!1),L=r({ip:"",country:"",prov:"",city:"",district:"",isp:"",lat:"",lng:""}),U=["/public/cover/sea/01.png","/public/cover/sea/02.png","/public/cover/sea/03.png","/public/cover/sea/04.png","/public/cover/sea/05.png","/public/cover/sea/06.png","/public/cover/sea/07.png"],q=c(null),B=()=>{O()},D=e=>{console.log(e)},F=async()=>{q.value.validate(e=>{if(!e)return!1;S.value=!0})},O=async()=>{try{const{username:e,password:l}=I,t=await V.toLogin({username:e,password:l});if(200==t.code){const{token:e}=t.data;A.setToken(e),await R()}else 201===t.code&&(n({title:"提示",message:t.msg||"登录失败",type:"warning"}),S.value=!1)}catch(e){console.log(e)}},R=async()=>{try{const e=await V.userInfo();if(200===e.code){let t=e.data;if(!t?.role)return n({title:"提示",message:"您没有角色，请联系管理员",duration:3e3,type:"error"}),A.logout(),void(S.value=!1);A.setUserInfo(t),n({title:"提示",message:"登录成功",duration:900,type:"success"}),await k(),await C(L),l.push(b.query.redirect||"/")}}catch(e){console.log(e)}};return i(()=>{(async()=>{try{let e=await $();if("Success"===e.code){const{country:l,prov:t,district:a,city:s,isp:o,lat:n,lng:r}=e.data;Object.assign(L,{ip:e.ip||"localhost",country:l,prov:t,city:s,district:a,isp:o,lat:n,lng:r}),P("ip",e.ip),P("city",s)}}catch(e){console.log(e)}})()}),(e,l)=>{const n=s,r=a,c=o,i=t;return h(),u(f,null,[d("div",z,[l[4]||(l[4]=d("div",{class:"login-bg pd-20 flex flex-col"},null,-1)),d("div",T,[d("div",E,[l[3]||(l[3]=d("h1",null,"CFD",-1)),p(i,{class:"mt-20 login-form",model:I,ref_key:"formRef",ref:q,"label-width":"70px",onKeyup:m(F,["enter"])},{default:g(()=>[p(r,{label:"用户名",prop:"username","label-position":"left",rules:[{required:!0,message:"请输入用户名",trigger:"blur"}]},{default:g(()=>[p(n,{modelValue:I.username,"onUpdate:modelValue":l[0]||(l[0]=e=>I.username=e),placeholder:"请输入用户名","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),p(r,{label:"密码",prop:"password","label-position":"left",rules:[{required:!0,message:"请输入密码",trigger:"blur"}]},{default:g(()=>[p(n,{type:"password",modelValue:I.password,"onUpdate:modelValue":l[1]||(l[1]=e=>I.password=e),placeholder:"请输入密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),p(r,null,{default:g(()=>[p(c,{class:"w-full",type:"primary",size:"large",onClick:F},{default:g(()=>[...l[2]||(l[2]=[v(" 登录 ",-1)])]),_:1})]),_:1})]),_:1},8,["model"])])])]),p(y(j),{imgs:U,show:S.value,onSuccess:B,onFail:D},null,8,["show"])],64)}}},[["__scopeId","data-v-8976c62e"]]))}}});
