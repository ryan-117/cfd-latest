System.register(["./element-plus-legacy.js","./@vue-legacy.js","./index-legacy.js"],function(e,a){"use strict";var l,t,o,r,d,s,c,n,u,i,m,f,p,v,h,y,g,_,b,k,x,w,A,V,I;return{setters:[e=>{l=e.q,t=e.r,o=e.s,r=e.K,d=e.B,s=e.C,c=e.g,n=e.D,u=e.a},e=>{i=e.r,m=e.e,f=e.W,p=e.w,v=e.K,h=e.o,y=e.L,g=e.O,_=e.a3,b=e.a,k=e.P},e=>{x=e.h,w=e.A,A=e._,V=e.t,I=e.a}],execute:function(){var a=document.createElement("style");a.textContent=".icon-list[data-v-ec23ad1f]{max-height:60vh;overflow-y:auto}.icon-item[data-v-ec23ad1f]{padding:12px;cursor:pointer;transition:all .3s}.icon-item[data-v-ec23ad1f]:hover{background-color:var(--el-color-primary-light-9)}.icon-wrapper[data-v-ec23ad1f]{display:flex;flex-direction:column;align-items:center;gap:8px}.icon[data-v-ec23ad1f]{width:2em;height:2em}.icon-name[data-v-ec23ad1f]{font-size:12px;text-align:center;word-break:break-all}.icon-suffix[data-v-ec23ad1f]{width:1em;height:1em;vertical-align:middle}.icon-suffix-container[data-v-ec23ad1f]{display:flex;align-items:center;gap:8px;padding-right:8px}.clear-icon[data-v-ec23ad1f]{cursor:pointer;color:#999;transition:color .2s}.clear-icon[data-v-ec23ad1f]:hover{color:#666}.selected-icon[data-v-ec23ad1f]{width:1em;height:1em}\n/*$vite$:1*/",document.head.appendChild(a),e("l",(e={})=>x({url:`${w.BASE_API}/base/role/list`,method:"get",params:e})),e("r",(e={})=>x({url:`${w.BASE_API}/base/role/delete`,method:"get",params:e}));const S={class:"dialog-footer"},B={__name:"dialog",props:{visible:{type:Boolean,default:!1},id:{type:Number,default:0}},emits:["update:visible","success"],setup(e,{emit:a}){const A=e,B=i(null),P=i(null),$=i([]),E=i(0),C=(e,{checkedKeys:a})=>{$.value=a},j=a,U=m({get:()=>A.visible,set:e=>j("update:visible",e)}),D=f({menus:[],form:{name:"",key:"",sort:"0",status:"1"}});p(()=>A.visible,async e=>{if(e&&(K(),A.id>0)){const e=Number(A.id);E.value=e,N(e),O(e)}});const K=async()=>{try{const e=await((e={})=>x({url:`${w.BASE_API}/base/menu/list`,method:"get",params:e}))();if(200===e.code){const a=V(e.data.list),l=I(a,"title","id");D.menus=l}}catch(e){console.log(e)}},O=async e=>{try{let l=await(a={id:e},x({url:`${w.BASE_API}/base/roleMenu/list`,method:"get",params:a}));if(console.log("res---\x3e",l),200==l.code){let e=l.data.list.map(e=>e.menu_id);$.value=[...e]}}catch(l){console.error(l)}var a},z=async()=>{try{const e=await((e={})=>x({url:`${w.BASE_API}/base/role/create`,method:"post",data:e}))({roleData:D.form,menuIds:$.value});200===e.code?(u({message:"创建成功 ^_^",type:"success"}),R()):u({message:e.msg,type:"error"})}catch(e){console.log(e)}},M=async()=>{try{let e={roleId:E.value,roleData:D.form,menuIds:$.value};const a=await((e={})=>x({url:`${w.BASE_API}/base/role/update`,method:"post",data:e}))(e);200===a.code?(u({message:"更新成功 ^_^",type:"success"}),R()):u({message:a.msg,type:"error"})}catch(e){console.log(e)}},N=async e=>{try{let a=await((e={})=>x({url:`${w.BASE_API}/base/role/detail`,method:"get",params:e}))({id:e});200==a.code&&(D.form=a.data)}catch(a){console.error(a)}},R=()=>{j("update:visible",!1),q()},q=()=>{D.form={name:"",key:"",sort:"0",status:"1"},D.menus=[],E.value=0,$.value=[]};return(e,a)=>{const u=o,i=t,m=r,f=s,p=d,x=l,w=c,A=n;return h(),v(A,{modelValue:U.value,"onUpdate:modelValue":a[5]||(a[5]=e=>U.value=e),title:"编辑",onClose:R},{footer:y(()=>[b("span",S,[g(w,{onClick:k(R,["stop"])},{default:y(()=>a[8]||(a[8]=[_("取消")])),_:1}),g(w,{type:"primary",onClick:a[4]||(a[4]=e=>(e=>{e&&e.validate(e=>{if(!e)return console.log("error submit!!"),!1;0==E.value?z():M()})})(B.value))},{default:y(()=>a[9]||(a[9]=[_("确定")])),_:1})])]),default:y(()=>[g(x,{model:D.form,ref_key:"formRef",ref:B,"label-width":"84px"},{default:y(()=>[g(i,{label:"角色名称",prop:"name"},{default:y(()=>[g(u,{modelValue:D.form.name,"onUpdate:modelValue":a[0]||(a[0]=e=>D.form.name=e),placeholder:"请输入角色名称"},null,8,["modelValue"])]),_:1}),g(i,{label:"角色标识",prop:"key"},{default:y(()=>[g(u,{modelValue:D.form.key,"onUpdate:modelValue":a[1]||(a[1]=e=>D.form.key=e),placeholder:"请输入角色标识"},null,8,["modelValue"])]),_:1}),g(i,{label:"角色顺序",prop:"sort"},{default:y(()=>[g(u,{modelValue:D.form.sort,"onUpdate:modelValue":a[2]||(a[2]=e=>D.form.sort=e),type:"number",placeholder:"请输入角色顺序"},null,8,["modelValue"])]),_:1}),g(i,{label:"权限菜单",prop:"pid"},{default:y(()=>[g(m,{onCheck:C,data:D.menus,"default-checked-keys":$.value,multiple:"",ref_key:"treeRef",ref:P,"render-after-expand":!1,"show-checkbox":"","check-on-click-node":"","show-count":!0,"node-key":"id",class:"w-full"},null,8,["data","default-checked-keys"])]),_:1}),g(i,{label:"状态"},{default:y(()=>[g(p,{modelValue:D.form.status,"onUpdate:modelValue":a[3]||(a[3]=e=>D.form.status=e)},{default:y(()=>[g(f,{label:"显示",value:"1"},{default:y(()=>a[6]||(a[6]=[_("正常")])),_:1}),g(f,{label:"隐藏",value:"2"},{default:y(()=>a[7]||(a[7]=[_("停用")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}},P=e("D",A(B,[["__scopeId","data-v-ec23ad1f"]])),$=Object.freeze(Object.defineProperty({__proto__:null,default:P},Symbol.toStringTag,{value:"Module"}));e("d",$)}}});
