import{f as H,u as M,v as P,T as R,U as $,x as z,y as F,E as c}from"./element-plus.js";import{u as I}from"./vue-router.js";import{H as K,F as L}from"./@element-plus.js";import{l as q,a as A}from"./slide.js";import{r as s,n as G,aj as J,ar as h,c as O,o as p,V as t,L as o,S as m,K as y,a3 as Q,H as W,u as b}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./index.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const X={class:"pd-20 bg-fff radius-6"},ye={__name:"index",setup(Y){const k=I(),d=s([]),w=s([]),u=s(0),_=s(1),i=async()=>{try{const e=await q(_.value);e.code===200?(d.value=[...e.data.list],u.value=e.data.count):c({message:e.msg,type:"error"})}catch(e){console.log(e)}},C=e=>{_.value=e,i()},E=e=>{w.value=e},x=e=>{const r=e.id;k.push({name:"slide-edit",params:{id:r}})},T=async e=>{const r=e.id;try{const a=await A(r);a.code===200?(c({message:"删除成功 ^_^",type:"success"}),i()):c({message:a.msg,type:"error"})}catch(a){console.log(a)}},U=s(null);return G(()=>{i()}),(e,r)=>{const a=H,D=J("router-link"),f=M,l=P,g=$,B=R,S=z,V=F,j=h("permission"),v=h("permission-disabled");return p(),O("div",X,[t(f,{type:"flex",class:"mt-10 mb-10",justify:"end"},{default:o(()=>[m((p(),y(D,{to:"/slide/add"},{default:o(()=>[t(a,{type:"primary",round:""},{default:o(()=>[...r[0]||(r[0]=[Q("新增",-1)])]),_:1})]),_:1})),[[j,["editor","admin","super"]]])]),_:1}),t(S,{ref_key:"multipleTable",ref:U,data:d.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:E},{default:o(()=>[t(l,{type:"selection"}),t(l,{prop:"id",label:"编号"}),t(l,{prop:"title",label:"标题"}),t(l,{prop:"imgUrl",label:"图片链接"},{default:o(n=>[n.row.imgUrl?(p(),y(B,{key:0,placement:"right",width:600,trigger:"hover"},{reference:o(()=>[t(g,{class:"avatar-uploader-icon pointer ml-10",src:n.row.imgUrl},null,8,["src"])]),default:o(()=>[t(g,{style:{width:"100%"},src:n.row.imgUrl},null,8,["src"])]),_:2},1024)):W("",!0)]),_:1}),t(l,{prop:"linkUrl",label:"跳转链接"}),t(l,{fixed:"right",width:"100",label:"操作"},{default:o(n=>[m(t(a,{icon:b(K),circle:"",onClick:N=>x(n.row)},null,8,["icon","onClick"]),[[v,["editor","admin","super"]]]),m(t(a,{icon:b(L),circle:"",onClick:N=>T(n.row)},null,8,["icon","onClick"]),[[v,["editor","admin","super"]]])]),_:1})]),_:1},8,["data"]),t(f,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:o(()=>[t(V,{background:"",layout:"prev, pager, next",onCurrentChange:C,"page-size":10,total:u.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}};export{ye as default};
