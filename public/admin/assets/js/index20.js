import{g as H,u as M,v as P,T as R,U as $,x as q,y as z,a as c}from"./element-plus.js";import{u as F}from"./vue-router.js";import{H as I,F as K}from"./@element-plus.js";import{l as L,a as O}from"./slide.js";import{r as s,n as A,ab as G,aq as h,c as J,o as p,O as t,L as o,T as m,K as y,a3 as Q,H as W,u as b}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./index.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const X={class:"pd-20 bg-fff radius-6"},ye={__name:"index",setup(Y){const k=F(),d=s([]),w=s([]),u=s(0),_=s(1),i=async()=>{try{const e=await L(_.value);e.code===200?(d.value=[...e.data.list],u.value=e.data.count):c({message:e.msg,type:"error"})}catch(e){console.log(e)}},C=e=>{_.value=e,i()},x=e=>{w.value=e},E=e=>{const l=e.id;k.push({name:"slide-edit",params:{id:l}})},T=async e=>{const l=e.id;try{const a=await O(l);a.code===200?(c({message:"删除成功 ^_^",type:"success"}),i()):c({message:a.msg,type:"error"})}catch(a){console.log(a)}},U=s(null);return A(()=>{i()}),(e,l)=>{const a=H,D=G("router-link"),f=M,r=P,g=$,B=R,N=q,S=z,V=h("permission"),v=h("permission-disabled");return p(),J("div",X,[t(f,{type:"flex",class:"mt-10 mb-10",justify:"end"},{default:o(()=>[m((p(),y(D,{to:"/slide/add"},{default:o(()=>[t(a,{type:"primary",round:""},{default:o(()=>l[0]||(l[0]=[Q("新增")])),_:1})]),_:1})),[[V,["editor","admin","super"]]])]),_:1}),t(N,{ref_key:"multipleTable",ref:U,data:d.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:x},{default:o(()=>[t(r,{type:"selection"}),t(r,{prop:"id",label:"编号"}),t(r,{prop:"title",label:"标题"}),t(r,{prop:"imgUrl",label:"图片链接"},{default:o(n=>[n.row.imgUrl?(p(),y(B,{key:0,placement:"right",width:600,trigger:"hover"},{reference:o(()=>[t(g,{class:"avatar-uploader-icon pointer ml-10",src:n.row.imgUrl},null,8,["src"])]),default:o(()=>[t(g,{style:{width:"100%"},src:n.row.imgUrl},null,8,["src"])]),_:2},1024)):W("",!0)]),_:1}),t(r,{prop:"linkUrl",label:"跳转链接"}),t(r,{fixed:"right",width:"100",label:"操作"},{default:o(n=>[m(t(a,{icon:b(I),circle:"",onClick:j=>E(n.row)},null,8,["icon","onClick"]),[[v,["editor","admin","super"]]]),m(t(a,{icon:b(K),circle:"",onClick:j=>T(n.row)},null,8,["icon","onClick"]),[[v,["editor","admin","super"]]])]),_:1})]),_:1},8,["data"]),t(f,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:o(()=>[t(S,{background:"",layout:"prev, pager, next",onCurrentChange:C,"page-size":10,total:u.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}};export{ye as default};
