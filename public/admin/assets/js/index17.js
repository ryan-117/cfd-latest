import{a as m,g as A,u as M,v as N,x as V,y as $}from"./element-plus.js";import{u as q}from"./vue-router.js";import{H as z,F}from"./@element-plus.js";import{l as H,a as I}from"./message.js";import{_ as K}from"./index.js";import{r,n as L,ab as O,aq as Q,c as i,o as l,O as e,L as n,T as u,K as G,a3 as h,Q as J,u as b}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const U={class:"bg-fff radius-6 pd-20"},W={key:0},X={key:1},Y={key:2},Z={key:3},ee={__name:"index",setup(te){const v=r(null),_=r([]),k=r([]),f=r(0),g=r(1),w=q(),C=z,x=F;L(()=>{c()});const c=async()=>{try{const t=await H(g.value);t.code===200?(_.value=t.data.list,f.value=t.data.count):m({message:t.msg,type:"error"})}catch(t){console.log(t)}},E=t=>{g.value=t,c()},D=t=>{k.value=t},T=t=>{w.push({name:"message-edit",params:{id:t.id}})},B=async t=>{try{const s=await I(t.id);s.code===200?(m({message:"删除成功 ^_^",type:"success"}),c()):m({message:s.msg,type:"error"})}catch(s){console.log(s)}};return(t,s)=>{const p=A,R=O("router-link"),y=M,o=N,S=V,P=$,d=Q("permission-disabled");return l(),i("div",U,[e(y,{type:"flex",justify:"end"},{default:n(()=>[u((l(),G(R,{to:"/message/add"},{default:n(()=>[e(p,{type:"primary",round:""},{default:n(()=>s[0]||(s[0]=[h("新增")])),_:1})]),_:1})),[[d,["editor","admin","super"]]])]),_:1}),e(S,{ref_key:"multipleTableRef",ref:v,data:_.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:D},{default:n(()=>[e(o,{type:"selection"}),e(o,{prop:"id",width:"80",label:"编号"}),e(o,{prop:"title",width:"300",label:"标题"}),e(o,{prop:"type",label:"留言类型"},{default:n(a=>[a.row.type==1?(l(),i("span",W,"咨询")):a.row.type==2?(l(),i("span",X,"建议")):a.row.type==3?(l(),i("span",Y,"投诉")):(l(),i("span",Z,"其它"))]),_:1}),e(o,{prop:"name",label:"联系人"}),e(o,{prop:"tel",label:"手机号"}),e(o,{prop:"company",label:"公司单位"}),e(o,{prop:"createdAt",label:"发布时间"},{default:n(a=>[h(J(a.row.createdAt),1)]),_:1}),e(o,{fixed:"right",width:"100",label:"操作"},{default:n(a=>[u(e(p,{icon:b(C),circle:"",onClick:j=>T(a.row)},null,8,["icon","onClick"]),[[d,["editor","admin","super"]]]),u(e(p,{icon:b(x),circle:"",onClick:j=>B(a.row)},null,8,["icon","onClick"]),[[d,["editor","admin","super"]]])]),_:1})]),_:1},8,["data"]),e(y,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:n(()=>[e(P,{background:"",layout:"prev, pager, next",onCurrentChange:E,"page-size":10,total:f.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}},we=K(ee,[["__scopeId","data-v-5f447a40"]]);export{we as default};
