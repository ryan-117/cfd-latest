import{E as m,f as V,u as A,v as M,x as N,y as $}from"./element-plus.js";import{u as z}from"./vue-router.js";import{H as F,F as H}from"./@element-plus.js";import{l as I,a as K}from"./message.js";import{_ as L}from"./index.js";import{r,n as q,aj as G,ar as J,c as i,o as l,V as e,L as n,S as u,K as O,a3 as h,P as Q,u as b}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const U={class:"bg-fff radius-6 pd-20"},W={key:0},X={key:1},Y={key:2},Z={key:3},ee={__name:"index",setup(te){const v=r(null),_=r([]),k=r([]),f=r(0),y=r(1),w=z(),C=F,x=H;q(()=>{c()});const c=async()=>{try{const t=await I(y.value);t.code===200?(_.value=t.data.list,f.value=t.data.count):m({message:t.msg,type:"error"})}catch(t){console.log(t)}},E=t=>{y.value=t,c()},D=t=>{k.value=t},S=t=>{w.push({name:"message-edit",params:{id:t.id}})},T=async t=>{try{const s=await K(t.id);s.code===200?(m({message:"删除成功 ^_^",type:"success"}),c()):m({message:s.msg,type:"error"})}catch(s){console.log(s)}};return(t,s)=>{const p=V,B=G("router-link"),g=A,o=M,P=N,R=$,d=J("permission-disabled");return l(),i("div",U,[e(g,{type:"flex",justify:"end"},{default:n(()=>[u((l(),O(B,{to:"/message/add"},{default:n(()=>[e(p,{type:"primary",round:""},{default:n(()=>[...s[0]||(s[0]=[h("新增",-1)])]),_:1})]),_:1})),[[d,["editor","admin","super"]]])]),_:1}),e(P,{ref_key:"multipleTableRef",ref:v,data:_.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:D},{default:n(()=>[e(o,{type:"selection"}),e(o,{prop:"id",width:"80",label:"编号"}),e(o,{prop:"title",width:"300",label:"标题"}),e(o,{prop:"type",label:"留言类型"},{default:n(a=>[a.row.type==1?(l(),i("span",W,"咨询")):a.row.type==2?(l(),i("span",X,"建议")):a.row.type==3?(l(),i("span",Y,"投诉")):(l(),i("span",Z,"其它"))]),_:1}),e(o,{prop:"name",label:"联系人"}),e(o,{prop:"tel",label:"手机号"}),e(o,{prop:"company",label:"公司单位"}),e(o,{prop:"createdAt",label:"发布时间"},{default:n(a=>[h(Q(a.row.createdAt),1)]),_:1}),e(o,{fixed:"right",width:"100",label:"操作"},{default:n(a=>[u(e(p,{icon:b(C),circle:"",onClick:j=>S(a.row)},null,8,["icon","onClick"]),[[d,["editor","admin","super"]]]),u(e(p,{icon:b(x),circle:"",onClick:j=>T(a.row)},null,8,["icon","onClick"]),[[d,["editor","admin","super"]]])]),_:1})]),_:1},8,["data"]),e(g,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:n(()=>[e(R,{background:"",layout:"prev, pager, next",onCurrentChange:E,"page-size":10,total:f.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}},we=L(ee,[["__scopeId","data-v-5f447a40"]]);export{we as default};
