import{f as H,u as L,v as P,w as R,a as U,x as j,y as q,A as z,E as v}from"./element-plus.js";import{u as F}from"./vue-router.js";import{v as I,H as K,F as W,B as G}from"./@element-plus.js";import{l as J,D as O,r as Q}from"./dialog.js";import{g as X}from"./index.js";import{r as p,W as Y,w as Z,n as ee,ar as te,c as oe,o as m,V as t,a as ae,L as l,S as u,K as h,a3 as w,P as ie,H as le,u as n}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const ne={class:"bg-fff radius-6 pd-20"},se={class:"mr-10 ml-10"},Te={__name:"index",setup(re){const y=p([]),_=p(0),f=p(1),g=X("username"),o=Y({dialogVisible:!1,id:0,params:{},list:[]}),C=F();Z(()=>o.dialogVisible,e=>{e||c()});const c=async()=>{try{const e=await J();e.code===200&&(o.list=[...e.data.list],_.value=e.data.total)}catch(e){console.log(e)}},k=e=>{f.value=e,c()},x=e=>{y.value=e},E=e=>{o.id=e.id,o.dialogVisible=!0},V=()=>{o.id=0,o.dialogVisible=!0},B=e=>{let{type_code:a}=e;C.push({name:"config",params:{id:a}})},D=async e=>{z.confirm("将会删除当前类型下所有配置，确定要继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{T(e)}).catch(()=>{v({type:"info",message:"取消成功"})})},T=async e=>{try{const{id:a}=e;(await Q({id:a})).code===200&&(v.success("删除成功 ^_^"),c())}catch(a){console.log(a)}};return ee(()=>{c()}),(e,a)=>{const s=H,S=L,r=P,M=U,N=R,$=j,A=q,d=te("permission-disabled");return m(),oe("div",ne,[t(S,{type:"flex",justify:"end"},{default:l(()=>[u((m(),h(s,{type:"primary",onClick:V,round:""},{default:l(()=>[...a[1]||(a[1]=[w("新增",-1)])]),_:1})),[[d,["editor","admin","super"]]])]),_:1}),ae("div",se,[t($,{data:o.list,"tooltip-effect":"dark","row-key":"id",onSelectionChange:x},{default:l(()=>[t(r,{prop:"id",width:"100",label:"编号"}),t(r,{prop:"type_code",label:"标识"}),t(r,{prop:"type_name",label:"名称"}),t(r,{prop:"status",label:"是否启用"},{default:l(i=>[w(ie(i.row.status==1?"启用":"关闭"),1)]),_:1}),t(r,{fixed:"right",width:"200",label:"操作"},{default:l(i=>[t(s,{icon:n(I),circle:"",onClick:b=>B(i.row)},null,8,["icon","onClick"]),u(t(s,{icon:n(K),circle:"",onClick:b=>E(i.row)},null,8,["icon","onClick"]),[[d,["editor","admin","super"]]]),u(t(s,{icon:n(W),onClick:b=>D(i.row),disabled:n(g)===i.row.username,circle:""},null,8,["icon","onClick","disabled"]),[[d,["editor","admin","super"]]]),n(g)===i.row.username?(m(),h(N,{key:0,content:"当前登录用户不可删除",effect:"light",placement:"top-start"},{default:l(()=>[t(M,{class:"ml-10 t-4 pointer"},{default:l(()=>[t(n(G),{class:"c-165dff"})]),_:1})]),_:1})):le("",!0)]),_:1})]),_:1},8,["data"]),t(A,{background:"",layout:"prev, pager, next",total:_.value,"page-size":10,"model-value":f.value,"onUpdate:modelValue":k,"hide-on-single-page":""},null,8,["total","model-value"])]),t(O,{visible:o.dialogVisible,"onUpdate:visible":a[0]||(a[0]=i=>o.dialogVisible=i),id:o.id},null,8,["visible","id"])])}}};export{Te as default};
