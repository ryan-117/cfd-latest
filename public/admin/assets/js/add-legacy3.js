System.register(["./element-plus-legacy.js","./category-legacy.js","./collect-legacy.js","./index-legacy.js","./@vue-legacy.js","./dayjs-legacy.js","./ace-builds-legacy.js","./@element-plus-legacy.js","./lodash-es-legacy.js","./@popperjs-legacy.js","./async-validator-legacy.js","./@ctrl-legacy.js","./memoize-one-legacy.js","./normalize-wheel-es-legacy.js","./pinia-legacy.js","./pinia-plugin-persist-legacy.js","./vue-router-legacy.js","./axios-legacy.js","./js-cookie-legacy.js","./nprogress-legacy.js","./saduo-legacy.js"],function(e,l){"use strict";var a,t,s,r,u,d,c,n,o,i,g,m,p,f,y,h,_,V,b,v,j,T,U,k,w,x,N,q,C,$,z,D,H,L,S;return{setters:[e=>{a=e.m,t=e.n,s=e.r,r=e.s,u=e.B,d=e.C,c=e.g,n=e.V,o=e.N,i=e.q,g=e.a},e=>{m=e.f},e=>{p=e.g,f=e.a,y=e.c},e=>{h=e._,_=e.a,V=e.t,b=e.b},e=>{v=e.r,j=e.W,T=e.n,U=e.aq,k=e.c,w=e.o,x=e.O,N=e.L,q=e.K,C=e.H,$=e.a,z=e.a3,D=e.I,H=e.ac,L=e.Q,S=e.T},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent="[data-v-d2afc070] .show .el-form-item__content{flex-direction:column;align-items:start}\n/*$vite$:1*/",document.head.appendChild(l);const B={class:"bg-fff pd-20 radius-6"},E={class:"flex w-full"},I={class:"flex w-full"},M={class:"flex w-full"},O=["href"],R={class:"flex w-full"},A={class:"f-15"},K=["innerHTML"];e("default",h({__name:"add",setup(e){const l=v(null),h=v("list"),P=v([]),Q={checkStrictly:!0},W=v([]),F=j({taskName:"",targetUrl:"",listTag:"",startNum:1,endNum:1,increment:1,pages:[],titleTag:"",articleTag:"",charset:"1",parseData:"return data;",status:"1",cid:1}),G=v([]),J=j({}),X=e=>{-1!==e[0]&&(F.cid=e[e.length-1])},Y=async()=>{try{let{targetUrl:e,listTag:l,charset:a}=F,t=await p({targetUrl:e,listTag:l,charset:a});if(200===t.code){let l=t.data;const a=/^(.*:\/\/[^\/]+).*$/,s=e.match(a),r=s?s[1]:"";l[0].includes("http")||(l=l.map(e=>`${r}${e}`)),F.pages=l,g({message:"列表地址获取成功^_^",type:"success"})}}catch(e){console.log(e)}},Z=async()=>{try{let{targetUrl:e,startNum:l,endNum:a,increment:t}=F,s=[];for(let r=l;r<=a;r+=t){let l=e.replace("${page}",r);s.push(l)}G.value=s,await Promise.all(G.value.map(async(e,l)=>{let{listTag:a,charset:t}=F;if(l>0){let l=await p({targetUrl:e,listTag:a,charset:t});200===l.code&&(F.pages=[...F.pages,...l.data])}}))}catch(e){console.log(e)}},ee=async()=>{try{let{titleTag:e,articleTag:l,parseData:a,charset:t}=F,s=F.pages[0]||"",r=await f({taskUrl:s,titleTag:e,articleTag:l,parseData:a,charset:t});200===r.code&&(J.title=r.data.title,J.article=r.data.article,g({message:"内容获取成功^_^",type:"success"}))}catch(e){console.log(e)}},le=e=>{e.validate((e,l)=>{if(!e)return b(l),!1;(async()=>{try{let e={...F};e.pages=F.pages.join(",");let l=await y(e);200===l.code?(g({message:"新增成功^_^",type:"success"}),ae()):g({message:l.msg,type:"error"})}catch(e){console.log(e)}})()})},ae=()=>{window.history.back()};return T(()=>{(async()=>{try{let e=await m();if(200===e.code){let l=_(V(e.data));W.value=[...l]}}catch(e){console.log(e)}})()}),(e,g)=>{const m=r,p=s,f=d,y=u,_=c,V=t,b=n,v=o,j=a,T=i,ae=U("permission-disabled");return w(),k("div",B,[x(T,{ref_key:"formRef",ref:l,model:F,"label-width":"84px"},{default:N(()=>[x(j,{modelValue:h.value,"onUpdate:modelValue":g[13]||(g[13]=e=>h.value=e),class:"demo-tabs"},{default:N(()=>[x(V,{label:"列表测试",name:"list"},{default:N(()=>[x(p,{label:"任务名称",prop:"taskName",rules:[{required:!0,message:"请输入任务名称",trigger:"blur"}]},{default:N(()=>[x(m,{modelValue:F.taskName,"onUpdate:modelValue":g[0]||(g[0]=e=>F.taskName=e),placeholder:"例：前端库-chat问答"},null,8,["modelValue"])]),_:1}),x(p,{label:"列表网址",prop:"targetUrl",rules:[{required:!0,message:"请输入匹配网址",trigger:"blur"}]},{default:N(()=>[$("div",E,[x(m,{class:"flex-1",modelValue:F.targetUrl,"onUpdate:modelValue":g[1]||(g[1]=e=>F.targetUrl=e),placeholder:"/SEO/1_${page}.html"},null,8,["modelValue"])])]),_:1}),x(p,{label:"字符集",prop:"charset",rules:[{required:!0,message:"请选择字符集",trigger:"blur"}]},{default:N(()=>[x(y,{modelValue:F.charset,"onUpdate:modelValue":g[2]||(g[2]=e=>F.charset=e),class:"ml-4"},{default:N(()=>[x(f,{value:"1",size:"large"},{default:N(()=>g[14]||(g[14]=[z("uft-8")])),_:1}),x(f,{value:"2",size:"large"},{default:N(()=>g[15]||(g[15]=[z("gb2312")])),_:1})]),_:1},8,["modelValue"])]),_:1}),x(p,{label:"列表链接",prop:"listTag",rules:[{required:!0,message:"请输入文章列表标签",trigger:"blur"}]},{default:N(()=>[$("div",I,[x(m,{class:"flex-1",modelValue:F.listTag,"onUpdate:modelValue":g[3]||(g[3]=e=>F.listTag=e),placeholder:"例：.content h4 a"},null,8,["modelValue"]),x(_,{class:"ml-5",type:"primary",onClick:Y},{default:N(()=>g[16]||(g[16]=[z(" 测试 ")])),_:1})])]),_:1}),x(p,{label:"开始页面"},{default:N(()=>[$("div",M,[x(m,{class:"flex-1",modelValue:F.startNum,"onUpdate:modelValue":g[4]||(g[4]=e=>F.startNum=e)},null,8,["modelValue"]),g[18]||(g[18]=$("span",{class:"ml-5 mr-5"},"至",-1)),x(m,{class:"flex-1",modelValue:F.endNum,"onUpdate:modelValue":g[5]||(g[5]=e=>F.endNum=e)},null,8,["modelValue"]),g[19]||(g[19]=$("span",{class:"ml-5 mr-5"},"每页递增",-1)),x(m,{class:"flex-1 mr-5",modelValue:F.increment,"onUpdate:modelValue":g[6]||(g[6]=e=>F.increment=e)},null,8,["modelValue"]),x(_,{type:"primary",onClick:Z},{default:N(()=>g[17]||(g[17]=[z("测试")])),_:1})])]),_:1}),G.value.length>0?(w(),q(p,{key:0,label:"列表地址"},{default:N(()=>[(w(!0),k(D,null,H(G.value,(e,l)=>(w(),k("p",{class:"mr-30",key:l},L(e),1))),128))]),_:1})):C("",!0),F.pages.length>0?(w(),q(p,{key:1,label:"文章地址"},{default:N(()=>[(w(!0),k(D,null,H(F.pages,(e,l)=>(w(),k("p",{class:"mr-30",key:l},L(e),1))),128))]),_:1})):C("",!0)]),_:1}),x(V,{label:"内容测试",name:"article"},{default:N(()=>[x(p,{label:"目标地址"},{default:N(()=>[$("a",{class:"mr-10",href:F.pages[0],target:"_blank"},L(F.pages[0]),9,O),g[20]||(g[20]=z("（默认第一个作为测试） "))]),_:1}),x(p,{label:"文章标题",prop:"titleTag",rules:[{required:!0,message:"请输入文章标题",trigger:"blur"}]},{default:N(()=>[x(m,{class:"flex-1",placeholder:"例：.title",modelValue:F.titleTag,"onUpdate:modelValue":g[7]||(g[7]=e=>F.titleTag=e)},null,8,["modelValue"])]),_:1}),x(p,{label:"文章内容",prop:"articleTag",rules:[{required:!0,message:"请输入文章内容",trigger:"blur"}]},{default:N(()=>[x(m,{placeholder:"例：.article",modelValue:F.articleTag,"onUpdate:modelValue":g[8]||(g[8]=e=>F.articleTag=e)},null,8,["modelValue"])]),_:1}),x(p,{label:"处理函数",prop:"parseData",rules:[{required:!0,message:"如果无特殊处理，请直接填写 return data;",trigger:"blur"}]},{default:N(()=>[$("div",R,[x(m,{class:"flex-1",type:"textarea",rows:13,modelValue:F.parseData,"onUpdate:modelValue":g[9]||(g[9]=e=>F.parseData=e),placeholder:"如果不做任何处理，直接返回data。拿到的文本是变量是data,可以直接js函数可以处理成需要的数据，最终需要返回data。例：\n            data = data.replaceAll('<BR>','<br/>');\n            return data;\n            //或\n            return data;\n            "},null,8,["modelValue"]),x(_,{class:"ml-5",type:"primary",onClick:ee},{default:N(()=>g[21]||(g[21]=[z(" 测试 ")])),_:1})])]),_:1}),J.title?(w(),q(p,{key:0,label:"采集结果"},{default:N(()=>[x(b,{class:"w-full",shadow:"never"},{header:N(()=>[$("p",A,[g[22]||(g[22]=$("span",{class:"c-999"},"标题：",-1)),z(L(J.title),1)])]),default:N(()=>[g[23]||(g[23]=$("p",{class:"f-15"},[$("span",{class:"c-999"},"内容：")],-1)),$("div",{class:"f-15 article",innerHTML:J.article},null,8,K)]),_:1})]),_:1})):C("",!0)]),_:1}),x(V,{label:"保存配置",name:"save"},{default:N(()=>[x(p,{label:"保存栏目",prop:"articleTag",rules:[{required:!0,message:"请输入保存栏目",trigger:"blur"}]},{default:N(()=>[x(v,{props:Q,"show-all-levels":!1,modelValue:P.value,"onUpdate:modelValue":g[10]||(g[10]=e=>P.value=e),options:W.value,onChange:X},null,8,["modelValue","options"])]),_:1}),x(p,{label:"发布状态",prop:"status",rules:[{required:!0,message:"请选择字符集",trigger:"blur"}]},{default:N(()=>[x(y,{modelValue:F.status,"onUpdate:modelValue":g[11]||(g[11]=e=>F.status=e),class:"ml-4"},{default:N(()=>[x(f,{value:"1",size:"large"},{default:N(()=>g[24]||(g[24]=[z("草稿")])),_:1}),x(f,{value:"2",size:"large"},{default:N(()=>g[25]||(g[25]=[z("发布")])),_:1})]),_:1},8,["modelValue"])]),_:1}),x(p,null,{default:N(()=>[S((w(),q(_,{type:"primary",onClick:g[12]||(g[12]=e=>le(l.value))},{default:N(()=>g[26]||(g[26]=[z("保存")])),_:1})),[[ae,["editor","admin","super"]]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])])}}},[["__scopeId","data-v-d2afc070"]]))}}});
